# Promto é¡¹ç›®æ¡†æ¶æ–‡æ¡£

## æ–‡æ¡£ä¿®è®¢è®°å½• (Version History)

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| 8.0 | 2025-12-04 | æ ¸å¿ƒåŠŸèƒ½åç«¯æ¥å…¥ï¼šDashboardä¼˜åŒ–åŠŸèƒ½è°ƒç”¨çœŸå®APIã€å†å²è®°å½•å®Œæ•´åç«¯æ¥å…¥ã€æ¨¡æ¿ç³»ç»Ÿæ–°å»ºæ•°æ®åº“è¡¨+æœåŠ¡å±‚+APIè·¯ç”±+å‰ç«¯é›†æˆ | AI Assistant |
| 7.0 | 2025-12-04 | å…¨é¢ä¼˜åŒ–ï¼šç™»å½•çŠ¶æ€14å¤©ä¿æŒã€æ¨¡å‹é…ç½®é¡µé¢åˆå¹¶API Keysã€è®¾ç½®/ä¸ªäººèµ„æ–™/é€šçŸ¥å¤šçª—å£é‡è®¾è®¡ã€å†å²æ—¶é—´çº¿è§†å›¾ã€Team Spaceåç«¯APIå®Œå–„ã€çœŸå®æ•°æ®æ›¿æ¢mock | AI Assistant |
| 6.0 | 2025-12-04 | Dashboard åŠŸèƒ½å¢å¼ºï¼šAIæ¨¡å‹é…ç½®é¡µé¢ã€å†å²è®°å½•äºŒæ¬¡ä¼˜åŒ–ã€Templates CRUDã€å›¢é˜ŸèŠå¤©ã€ä¸ªäººèµ„æ–™åŒæ­¥ã€BillingçœŸå®æ•°æ®ã€è®¾ç½®ç•Œé¢ä¼˜åŒ– | AI Assistant |
| 5.7 | 2025-12-04 | é‚®ç®±é‡å¤æ£€æµ‹ï¼šæ–°å¢æ³¨å†Œé¡µé¢å®æ—¶é‚®ç®±æ£€æµ‹åŠŸèƒ½ï¼Œé˜²æ­¢é‡å¤æ³¨å†Œ | AI Assistant |
| 5.6 | 2025-12-04 | OAuthç™»å½•ä¿®å¤ï¼šä¿®å¤æœ¬åœ°å¼€å‘ç¯å¢ƒ Google ç™»å½•åè®®é”™è¯¯(httpsâ†’http)ï¼Œä¼˜åŒ– GitHub OAuth å›è°ƒé…ç½® | AI Assistant |
| 5.5 | 2025-12-04 | ç™»å½•/æ³¨å†Œé¡µé¢å·¦ä¾§é¢æ¿æ·»åŠ  LightPillar åŠ¨æ€èƒŒæ™¯ï¼Œä¸ Landing Page ä¿æŒè§†è§‰ä¸€è‡´æ€§ | AI Assistant |
| 5.4 | 2025-12-04 | Landing Page èƒŒæ™¯è°ƒæ•´ - LightPillar é™ä½ intensity(0.7â†’0.55)ã€glowAmount(0.005â†’0.004)ï¼Œæ·»åŠ  backdrop-blur-[2px]ï¼ŒHero åŒºè£…é¥°æ•ˆæœåŒæ­¥æŸ”åŒ– | AI Assistant |
| 5.3 | 2025-12-04 | Landing Page LightPillar åŠ¨æ€èƒŒæ™¯ - Three.js WebGL ç€è‰²å™¨æ•ˆæœï¼Œä¸€ä½“å¼æ·±è‰²èƒŒæ™¯è®¾è®¡ | AI Assistant |
| 5.2 | 2025-12-04 | Hero å…¨å±è‡ªé€‚åº”ã€å¯¼èˆªæ å±…ä¸­ã€ç™»å½•/æ³¨å†Œé¡µæ»šåŠ¨æ¡ä¿®å¤ã€Landing èƒŒæ™¯ç»Ÿä¸€è®¾è®¡ | AI Assistant |
| 5.1 | 2025-12-04 | How it works è¿æ¥çº¿å®Œç¾å¯¹é½ï¼ŒTemplates é¡µé¢å¡æ­»ä¿®å¤ | AI Assistant |
| 5.0 | 2025-12-04 | Landing Page ä¼˜åŒ–ï¼šæ»šåŠ¨åŠ¨ç”»ã€è¿æ¥çº¿ä¿®å¤ã€Docs é¡µé¢ã€é»‘å±ä¿®å¤ | AI Assistant |
| 4.0 | 2025-12-03 | å“ç‰Œé‡å¡‘ï¼šé¡¹ç›®æ›´åä¸º Promtoï¼Œæ›´æ¢ Logo ä¸º apple-icon.pngï¼Œå…¨é¢æ›¿æ¢ PromptCraft/Prompt Optimizer åç§° | AI Assistant |
| 3.0 | 2025-12-03 | å¤šAI Provideræ”¯æŒï¼šæ·»åŠ Gemini/OpenRouterï¼Œç”¨æˆ·è‡ªå®šä¹‰API Keyé…ç½®ç•Œé¢ï¼Œå®æ—¶æ¨¡å‹åˆ—è¡¨è·å– | AI Assistant |
| 2.0 | 2025-12-03 | å®Œæ•´åç«¯æ¶æ„å®ç°ï¼šæ•°æ®åº“Schemaã€APIè·¯ç”±ã€LLMé›†æˆã€ä¼˜åŒ–æœåŠ¡ã€è¯„ä¼°ç³»ç»Ÿã€è®¤è¯ç³»ç»Ÿ | AI Assistant |
| 1.1 | 2025-12-03 | å®Œæˆ Supabase å®¢æˆ·ç«¯é›†æˆï¼šå®‰è£…ä¾èµ–ã€é…ç½®å®¢æˆ·ç«¯ã€ç¯å¢ƒå˜é‡ã€è¾…åŠ©å‡½æ•° | AI Assistant |
| 1.0 | 2025-12-03 | åˆå§‹ç‰ˆæœ¬ï¼šé¡¹ç›®ç¯å¢ƒæ­å»ºå’Œ Cloudflared + Supabase é›†æˆ | AI Assistant |

---

## ä¸€ã€æˆ˜ç•¥å±‚ï¼šèƒŒæ™¯ä¸ç›®æ ‡ (Why)

### é¡¹ç›®èƒŒæ™¯ (Project Background)

**å¸‚åœºç¯å¢ƒåˆ†æï¼š**
- AI åº”ç”¨å¼€å‘å·¥å…·éœ€æ±‚æŒç»­å¢é•¿
- å¼€å‘è€…éœ€è¦æ›´é«˜æ•ˆçš„ prompt ä¼˜åŒ–å·¥å…·
- äº‘ç«¯éƒ¨ç½²å’Œå®æ—¶åä½œæˆä¸ºæ ‡å‡†éœ€æ±‚

**é¡¹ç›®å‘èµ·åŸå› ï¼š**
- åŸºäº v0.app å¿«é€Ÿæ„å»ºçš„ AI prompt ä¼˜åŒ–å·¥å…·
- éœ€è¦å»ºç«‹å®Œæ•´çš„å¼€å‘ã€éƒ¨ç½²å’Œæ•°æ®ç®¡ç†ä½“ç³»
- è§£å†³ä¼ ç»Ÿ prompt ä¼˜åŒ–å·¥å…·çš„ç”¨æˆ·ä½“éªŒé—®é¢˜

### æ ¸å¿ƒä»·å€¼ä¸»å¼  (Value Proposition)

**è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š**
- ç®€åŒ– AI prompt çš„ä¼˜åŒ–æµç¨‹
- æä¾›å¯è§†åŒ–çš„æ•°æ®åº“ç®¡ç†ç•Œé¢
- å®ç°å…¬ç½‘è®¿é—®å’Œå›¢é˜Ÿåä½œ

**å·®å¼‚åŒ–ä¼˜åŠ¿ï¼š**
- åŸºäº Next.js 16 + Turbopack çš„é«˜æ€§èƒ½å‰ç«¯
- é›†æˆ Supabase å®ç°å®æ—¶æ•°æ®åŒæ­¥
- ä½¿ç”¨ Cloudflare Tunnel å®ç°å®‰å…¨çš„å…¬ç½‘è®¿é—®ï¼Œæ— éœ€æš´éœ²æœåŠ¡å™¨ç«¯å£

### å•†ä¸šç›®æ ‡ (Business Goals)

**å®šæ€§ç›®æ ‡ï¼š**
- å»ºç«‹ç¨³å®šçš„å¼€å‘å’Œéƒ¨ç½²æµç¨‹
- æä¾›ä¸“ä¸šçš„æ•°æ®åº“ç®¡ç†èƒ½åŠ›
- æ‰“é€ ç°ä»£åŒ–çš„ç”¨æˆ·ä½“éªŒ

**å®šé‡ç›®æ ‡ (KPIs)ï¼š**
- é¡µé¢åŠ è½½æ—¶é—´ < 2 ç§’
- ç³»ç»Ÿå¯ç”¨æ€§ > 99%
- æ”¯æŒå¹¶å‘ç”¨æˆ·è®¿é—®

---

## äºŒã€èŒƒå›´å±‚ï¼šç”¨æˆ·ä¸åœºæ™¯ (Who & When)

### ç”¨æˆ·ç”»åƒ (User Personas)

**ä¸»è¦ç”¨æˆ·ç¾¤ä½“ï¼š**
- **è§’è‰²**ï¼šAI åº”ç”¨å¼€å‘è€…ã€Prompt å·¥ç¨‹å¸ˆ
- **æŠ€æœ¯ç†Ÿç»ƒåº¦**ï¼šä¸­é«˜çº§
- **ä½¿ç”¨åœºæ™¯**ï¼šprompt ä¼˜åŒ–ã€æµ‹è¯•ã€ç®¡ç†
- **ç—›ç‚¹**ï¼š
  - éœ€è¦å¿«é€Ÿè¿­ä»£å’Œæµ‹è¯• prompt
  - éœ€è¦ç®¡ç†å’Œå­˜å‚¨å†å²è®°å½•
  - éœ€è¦å›¢é˜Ÿåä½œå’Œåˆ†äº«

### ç”¨æˆ·åœºæ™¯ (Use Cases)

**åœºæ™¯ 1ï¼šPrompt ä¼˜åŒ–**
- ç”¨æˆ·è¾“å…¥åŸå§‹ prompt
- ç³»ç»Ÿæä¾›ä¼˜åŒ–å»ºè®®
- ç”¨æˆ·æŸ¥çœ‹å’Œæ¯”è¾ƒç»“æœ
- ä¿å­˜ä¼˜åŒ–åçš„ prompt

**åœºæ™¯ 2ï¼šæ•°æ®ç®¡ç†**
- ç®¡ç†å‘˜é€šè¿‡ Supabase Studio ç®¡ç†æ•°æ®
- åˆ›å»ºå’Œä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„
- æŸ¥çœ‹ç”¨æˆ·æ•°æ®å’Œä½¿ç”¨ç»Ÿè®¡
- æ‰§è¡Œæ•°æ®åº“ç»´æŠ¤æ“ä½œ

**åœºæ™¯ 3ï¼šè¿œç¨‹è®¿é—®**
- ç”¨æˆ·é€šè¿‡å…¬ç½‘åŸŸåè®¿é—®åº”ç”¨
- æ— éœ€ VPN æˆ–ç«¯å£è½¬å‘
- å®‰å…¨åŠ å¯†çš„æ•°æ®ä¼ è¾“

### ç”¨æˆ·æ•…äº‹ (User Stories)

- **US-001**ï¼šä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘æƒ³è¦é€šè¿‡åŸŸåè®¿é—®åº”ç”¨ï¼Œä»¥ä¾¿äºåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨
- **US-002**ï¼šä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘æƒ³è¦å¯è§†åŒ–ç®¡ç†æ•°æ®åº“ï¼Œä»¥ä¾¿äºç»´æŠ¤æ•°æ®
- **US-003**ï¼šä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æƒ³è¦å¿«é€ŸåŠ è½½é¡µé¢ï¼Œä»¥ä¾¿äºé«˜æ•ˆå·¥ä½œ

---

## ä¸‰ã€ç»“æ„å±‚ï¼šäº§å“æ¶æ„ä¸åŠŸèƒ½ (What)

### äº§å“åŠŸèƒ½æ¶æ„å›¾ (Functional Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Web åº”ç”¨           â”‚  Supabase Studio    â”‚  API é›†æˆ        â”‚
â”‚  (Next.js)          â”‚  (æ•°æ®åº“ç®¡ç†)        â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Cloudflare Tunnel                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ www.promto.org       â”‚  â”‚ supabase.promto.org  â”‚         â”‚
â”‚  â”‚ â†’ localhost:3000     â”‚  â”‚ â†’ localhost:54323    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨æœåŠ¡å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  Next.js Server     â”‚  Supabase Local                      â”‚  â”‚
â”‚  - Port: 3000       â”‚  - Studio: 54323                     â”‚  â”‚
â”‚  - Turbopack        â”‚  - API: 54321                        â”‚  â”‚
â”‚  - React 19         â”‚  - DB: 54322                         â”‚  â”‚
â”‚                     â”‚  - Mailpit: 54324                    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL Database                                 â”‚   â”‚
â”‚  â”‚  - ç”¨æˆ·æ•°æ®                                           â”‚   â”‚
â”‚  â”‚  - Prompt å†å²è®°å½•                                   â”‚   â”‚
â”‚  â”‚  - ç³»ç»Ÿé…ç½®                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆæ¶æ„

**å‰ç«¯å±‚ï¼š**
- Next.js 16.0.3 (App Router)
- React 19.2.0
- Turbopack (æ„å»ºå·¥å…·)
- Tailwind CSS 4.1.9
- Radix UI (ç»„ä»¶åº“)
- Framer Motion (åŠ¨ç”»)

**åç«¯æœåŠ¡ï¼š**
- Supabase (BaaS)
  - PostgreSQL æ•°æ®åº“
  - å®æ—¶è®¢é˜…
  - è®¤è¯æœåŠ¡
  - å­˜å‚¨æœåŠ¡
- Supabase å®¢æˆ·ç«¯é›†æˆ
  - @supabase/supabase-js (å®¢æˆ·ç«¯åº“)
  - @supabase/ssr (SSR æ”¯æŒ)
  - æµè§ˆå™¨ç«¯å®¢æˆ·ç«¯
  - æœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯
  - React Hooks

**åŸºç¡€è®¾æ–½ï¼š**
- Node.js 20.19.6
- Docker (Supabase æœ¬åœ°ç¯å¢ƒ)
- Cloudflared (éš§é“æœåŠ¡)
- Cloudflare DNS

### ä¿¡æ¯æ¶æ„ (Information Architecture - IA)

**å¯¼èˆªç»“æ„ï¼š**
```
é¦–é¡µ
â”œâ”€â”€ Prompt ä¼˜åŒ–å™¨
â”‚   â”œâ”€â”€ è¾“å…¥ç•Œé¢
â”‚   â”œâ”€â”€ ä¼˜åŒ–ç»“æœ
â”‚   â””â”€â”€ å†å²è®°å½•
â”œâ”€â”€ ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ æˆ‘çš„ Prompts
â”‚   â””â”€â”€ è®¾ç½®
â””â”€â”€ ç®¡ç†åå° (Supabase Studio)
    â”œâ”€â”€ æ•°æ®åº“ç®¡ç†
    â”œâ”€â”€ è®¤è¯ç®¡ç†
    â””â”€â”€ å­˜å‚¨ç®¡ç†
```

**æ•°æ®æµè½¬é€»è¾‘ï¼š**
1. ç”¨æˆ·è¾“å…¥ â†’ Next.js å‰ç«¯
2. API è¯·æ±‚ â†’ Supabase API
3. æ•°æ®æŒä¹…åŒ– â†’ PostgreSQL
4. å®æ—¶æ›´æ–° â†’ WebSocket æ¨é€
5. ç®¡ç†æ“ä½œ â†’ Supabase Studio

### å…¨å±€è§„åˆ™ (Global Rules)

**è´¦å·ä½“ç³»ï¼š**
- Supabase Auth æä¾›è®¤è¯æœåŠ¡
- æ”¯æŒé‚®ç®±/å¯†ç ç™»å½•
- JWT Token è®¤è¯
- ä¼šè¯ç®¡ç†

**å¼‚å¸¸çŠ¶æ€å¤„ç†ï¼š**
- ç½‘ç»œæ–­å¼€ï¼šæ˜¾ç¤ºç¦»çº¿æç¤º
- åŠ è½½å¤±è´¥ï¼šæ˜¾ç¤ºé‡è¯•æŒ‰é’®
- ç©ºæ•°æ®ï¼šæ˜¾ç¤ºç©ºçŠ¶æ€å¼•å¯¼
- é”™è¯¯è¾¹ç•Œï¼šæ•è· React é”™è¯¯

**æƒé™æ§åˆ¶ï¼š**
- å…¬å¼€è®¿é—®ï¼šä¸»é¡µå’Œä¼˜åŒ–åŠŸèƒ½
- ç™»å½•ç”¨æˆ·ï¼šä¿å­˜å†å²è®°å½•
- ç®¡ç†å‘˜ï¼šSupabase Studio è®¿é—®

---

## å››ã€æµç¨‹å±‚ï¼šä¸šåŠ¡é€»è¾‘ (How)

### æ ¸å¿ƒä¸šåŠ¡æµç¨‹å›¾ (Business Flowcharts)

#### æµç¨‹ 1ï¼šåº”ç”¨éƒ¨ç½²æµç¨‹

```
å¼€å§‹
  â†“
å®‰è£… Node.js 20.19.6 (ä½¿ç”¨ nvm)
  â†“
å®‰è£…é¡¹ç›®ä¾èµ– (npm install)
  â†“
å¯åŠ¨ Next.js å¼€å‘æœåŠ¡å™¨ (npm run dev)
  â†“
å®‰è£… Supabase CLI
  â†“
åˆå§‹åŒ– Supabase (supabase init)
  â†“
å®‰è£… Docker
  â†“
å¯åŠ¨ Supabase (supabase start)
  â†“
é…ç½® Cloudflared Tunnel
  â†“
æ›´æ–° DNS è®°å½•
  â†“
éƒ¨ç½²å®Œæˆ
```

#### æµç¨‹ 2ï¼šç”¨æˆ·è®¿é—®æµç¨‹

```
ç”¨æˆ·è®¿é—®åŸŸå (www.promto.org)
  â†“
Cloudflare DNS è§£æ
  â†“
Cloudflare Tunnel è½¬å‘
  â†“
æœ¬åœ° Next.js æœåŠ¡å™¨ (localhost:3000)
  â†“
æ¸²æŸ“é¡µé¢å¹¶è¿”å›
  â†“
ç”¨æˆ·äº¤äº’
  â†“
API è¯·æ±‚ â†’ Supabase
  â†“
æ•°æ®åº“æ“ä½œ
  â†“
è¿”å›ç»“æœ
```

#### æµç¨‹ 3ï¼šæ•°æ®åº“ç®¡ç†æµç¨‹

```
ç®¡ç†å‘˜è®¿é—® supabase.promto.org
  â†“
Cloudflare Tunnel è½¬å‘
  â†“
Supabase Studio (localhost:54323)
  â†“
èº«ä»½éªŒè¯
  â†“
é€‰æ‹©æ“ä½œ
  â”œâ”€â”€ è¡¨ç®¡ç† â†’ åˆ›å»º/ä¿®æ”¹è¡¨ç»“æ„
  â”œâ”€â”€ æ•°æ®ç®¡ç† â†’ CRUD æ“ä½œ
  â”œâ”€â”€ SQL ç¼–è¾‘å™¨ â†’ æ‰§è¡Œè‡ªå®šä¹‰ SQL
  â””â”€â”€ æ—¥å¿—æŸ¥çœ‹ â†’ ç›‘æ§ç³»ç»Ÿ
  â†“
æ“ä½œå®Œæˆ
```

### é¡µé¢è·³è½¬æµç¨‹ (UI Flow)

```
é¦–é¡µ (/)
  â†“
  â”œâ†’ ä¼˜åŒ– Prompt (/optimize)
  â”‚   â†“
  â”‚   â”œâ†’ æŸ¥çœ‹ç»“æœ
  â”‚   â””â†’ ä¿å­˜åˆ°å†å²
  â”‚
  â”œâ†’ å†å²è®°å½• (/history)
  â”‚   â†“
  â”‚   â””â†’ æŸ¥çœ‹è¯¦æƒ…
  â”‚
  â””â†’ ç™»å½• (/auth/login)
      â†“
      â””â†’ ä¸ªäººä¸­å¿ƒ (/profile)
```

---

## äº”ã€æ‰§è¡Œå±‚ï¼šéåŠŸèƒ½éœ€æ±‚ä¸è§„åˆ’ (Constraints & Plan)

### éåŠŸèƒ½æ€§éœ€æ±‚ (Non-functional Requirements)

**æ€§èƒ½è¦æ±‚ï¼š**
- é¦–å±åŠ è½½æ—¶é—´ < 2 ç§’
- API å“åº”æ—¶é—´ < 500ms
- æ”¯æŒå¹¶å‘ç”¨æˆ·æ•° > 100
- ä½¿ç”¨ Turbopack æå‡æ„å»ºé€Ÿåº¦

**æ•°æ®åŸ‹ç‚¹ï¼š**
- é¡µé¢è®¿é—®é‡ (PV)
- ç”¨æˆ·æ´»è·ƒåº¦ (DAU)
- åŠŸèƒ½ä½¿ç”¨é¢‘ç‡
- é”™è¯¯ç‡ç›‘æ§

**å®‰å…¨éœ€æ±‚ï¼š**
- HTTPS åŠ å¯†ä¼ è¾“ (é€šè¿‡ Cloudflare)
- JWT Token è®¤è¯
- SQL æ³¨å…¥é˜²æŠ¤ (Supabase ORM)
- XSS é˜²æŠ¤ (React è‡ªåŠ¨è½¬ä¹‰)
- CORS é…ç½®
- ç¯å¢ƒå˜é‡ä¿æŠ¤æ•æ„Ÿä¿¡æ¯

**å…¼å®¹æ€§ï¼š**
- æµè§ˆå™¨ï¼šChrome, Firefox, Safari, Edge (æœ€æ–°ç‰ˆæœ¬)
- Node.js: >= 20.9.0
- Docker: æœ€æ–°ç¨³å®šç‰ˆ

**å¯ç»´æŠ¤æ€§ï¼š**
- TypeScript ç±»å‹å®‰å…¨
- ESLint ä»£ç è§„èŒƒ
- Git ç‰ˆæœ¬æ§åˆ¶
- æ–‡æ¡£å®Œå–„

### ç‰ˆæœ¬è§„åˆ’ (Roadmap)

**MVP (å½“å‰ç‰ˆæœ¬ - v1.0)ï¼š**
- âœ… Next.js åº”ç”¨åŸºç¡€æ¡†æ¶
- âœ… Supabase æœ¬åœ°ç¯å¢ƒæ­å»º
- âœ… Cloudflared éš§é“é…ç½®
- âœ… åŸŸåè®¿é—®èƒ½åŠ›
- âœ… æ•°æ®åº“ç®¡ç†ç•Œé¢

**V1.1 è§„åˆ’ï¼ˆçŸ­æœŸï¼‰ï¼š**
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] Prompt ä¼˜åŒ–æ ¸å¿ƒåŠŸèƒ½
- [ ] å†å²è®°å½•ç®¡ç†
- [ ] å“åº”å¼è®¾è®¡ä¼˜åŒ–

**V1.2 è§„åˆ’ï¼ˆä¸­æœŸï¼‰ï¼š**
- [ ] AI æ¨¡å‹é›†æˆ
- [ ] å®æ—¶åä½œåŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿

**V2.0 è§„åˆ’ï¼ˆé•¿æœŸï¼‰ï¼š**
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] é«˜çº§åˆ†æåŠŸèƒ½
- [ ] API å¯¹å¤–å¼€æ”¾
- [ ] ç§»åŠ¨ç«¯åº”ç”¨

### é£é™©è¯„ä¼° (Risk Assessment)

**æŠ€æœ¯é£é™©ï¼š**
- **é£é™©**ï¼šCloudflare Tunnel è¿æ¥ä¸ç¨³å®š
- **åº”å¯¹**ï¼šé…ç½®è‡ªåŠ¨é‡è¿ï¼Œç›‘æ§æœåŠ¡çŠ¶æ€

**é£é™©**ï¼šSupabase æœ¬åœ°ç¯å¢ƒä¾èµ– Docker
- **åº”å¯¹**ï¼šæä¾›äº‘ç«¯ Supabase æ›¿ä»£æ–¹æ¡ˆ

**è¿ç»´é£é™©ï¼š**
- **é£é™©**ï¼šæœåŠ¡å™¨èµ„æºä¸è¶³
- **åº”å¯¹**ï¼šç›‘æ§èµ„æºä½¿ç”¨ï¼Œè®¾ç½®å‘Šè­¦

**é£é™©**ï¼šé…ç½®æ–‡ä»¶é”™è¯¯å¯¼è‡´æœåŠ¡ä¸­æ–­
- **åº”å¯¹**ï¼šé…ç½®æ–‡ä»¶ç‰ˆæœ¬ç®¡ç†ï¼Œè‡ªåŠ¨éªŒè¯

**å®‰å…¨é£é™©ï¼š**
- **é£é™©**ï¼šæ•æ„Ÿä¿¡æ¯æ³„éœ²
- **åº”å¯¹**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œä¸æäº¤åˆ° Git

**é£é™©**ï¼šDDoS æ”»å‡»
- **åº”å¯¹**ï¼šä½¿ç”¨ Cloudflare é˜²æŠ¤å±‚

---

## å…­ã€é™„å½• (Appendix)

### éƒ¨ç½²é…ç½®

**ç¯å¢ƒå˜é‡ï¼š**
```bash
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH
SUPABASE_SERVICE_ROLE_KEY=sb_secret_N7UND0UgjKTVK-Uodkm0Hg_xSvEMPvz

# æ•°æ®åº“è¿æ¥
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres
```

**Cloudflared é…ç½®ï¼š**
```yaml
tunnel: 9557c896-c0d5-4b97-b4d2-dc8fd8cd93b0
credentials-file: /etc/cloudflared/9557c896-c0d5-4b97-b4d2-dc8fd8cd93b0.json

ingress:
  - hostname: www.promto.org
    service: http://localhost:3000
  - hostname: supabase.promto.org
    service: http://localhost:54323
  - service: http_status:404
```

**DNS é…ç½®ï¼š**
| è®°å½•ç±»å‹ | åç§° | ç›®æ ‡ |
|----------|------|------|
| CNAME | www | 9557c896-c0d5-4b97-b4d2-dc8fd8cd93b0.cfargotunnel.com |
| CNAME | supabase | 9557c896-c0d5-4b97-b4d2-dc8fd8cd93b0.cfargotunnel.com |

### æœåŠ¡ç«¯å£æ˜ å°„

| æœåŠ¡ | æœ¬åœ°ç«¯å£ | å…¬ç½‘åŸŸå | ç”¨é€” |
|------|----------|----------|------|
| Next.js | 3000 | www.promto.org | ä¸»åº”ç”¨ |
| Supabase API | 54321 | - | REST/GraphQL API |
| Supabase Studio | 54323 | supabase.promto.org | æ•°æ®åº“ç®¡ç† |
| PostgreSQL | 54322 | - | æ•°æ®åº“ |
| Mailpit | 54324 | - | é‚®ä»¶æµ‹è¯• |

### è®¾è®¡è§„èŒƒ (Design System)

**UI ç»„ä»¶åº“ï¼š**
- Radix UIï¼ˆæ— æ ·å¼ç»„ä»¶åŸºç¡€ï¼‰
- Tailwind CSSï¼ˆæ ·å¼ç³»ç»Ÿï¼‰
- Framer Motionï¼ˆåŠ¨ç”»ï¼‰
- Lucide Reactï¼ˆå›¾æ ‡ï¼‰

**é¢œè‰²è§„èŒƒï¼š**
- ä½¿ç”¨ Tailwind CSS é»˜è®¤è°ƒè‰²æ¿
- æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢ï¼ˆnext-themesï¼‰

**æ’ç‰ˆè§„èŒƒï¼š**
- å­—ä½“ï¼šç³»ç»Ÿé»˜è®¤å­—ä½“æ ˆ
- é—´è·ï¼šåŸºäº Tailwind spacing scale

### ä¸“æœ‰åè¯è§£é‡Š (Glossary)

- **Turbopack**ï¼šNext.js 16 å¼•å…¥çš„æ–°ä¸€ä»£æ‰“åŒ…å·¥å…·ï¼Œæ¯” Webpack å¿« 700 å€
- **Supabase**ï¼šå¼€æºçš„ Firebase æ›¿ä»£å“ï¼ŒåŸºäº PostgreSQL
- **Cloudflared**ï¼šCloudflare Tunnel å®¢æˆ·ç«¯ï¼Œç”¨äºå®‰å…¨åœ°æš´éœ²æœ¬åœ°æœåŠ¡
- **BaaS**ï¼šBackend as a Serviceï¼Œåç«¯å³æœåŠ¡
- **JWT**ï¼šJSON Web Tokenï¼Œç”¨äºèº«ä»½è®¤è¯çš„ä»¤ç‰Œæ ¼å¼
- **ORM**ï¼šObject-Relational Mappingï¼Œå¯¹è±¡å…³ç³»æ˜ å°„

### ç›¸å…³æ–‡æ¡£é“¾æ¥

- å¿«é€Ÿå¯åŠ¨æŒ‡å—ï¼š`/home/maxsong/QUICK-START.md`
- Cloudflared éƒ¨ç½²æŒ‡å—ï¼š`/home/maxsong/cloudflared-supabase-setup.md`
- Supabase è®¾ç½®æŒ‡å—ï¼š`/home/maxsong/supabase-setup-guide.md`
- é¡¹ç›® READMEï¼š`/home/maxsong/prompt-optimizer/README.md`

---

### 2025-12-03 - V4.0 å“ç‰Œé‡å¡‘ (Promto)

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. é¡¹ç›®æ›´å
- é¡¹ç›®åç§°ä» "Prompt Optimizer" / "PromptCraft" ç»Ÿä¸€æ›´åä¸º **Promto**
- åŸŸåä» promptcraft.io æ”¹ä¸º promto.org

#### 2. Logo æ›´æ¢
- ä½¿ç”¨ `apple-icon.png` ä½œä¸ºæ–° Logo
- æ›¿æ¢äº†æ‰€æœ‰ä½¿ç”¨ Sparkles å›¾æ ‡çš„åœ°æ–¹

#### 3. ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

**é…ç½®æ–‡ä»¶ (3ä¸ª)ï¼š**
- `package.json` - name: "promto"
- `package-lock.json` - name: "promto"
- `supabase/config.toml` - project_id: "promto"

**å¸ƒå±€ç»„ä»¶ (3ä¸ª)ï¼š**
- `components/layout/navbar.tsx` - Logo å›¾ç‰‡ + åç§°
- `components/layout/footer.tsx` - Logo å›¾ç‰‡ + åç§°
- `components/layout/sidebar.tsx` - Logo å›¾ç‰‡ + åç§°

**é¡µé¢æ–‡ä»¶ (6ä¸ª)ï¼š**
- `app/layout.tsx` - ç½‘ç«™æ ‡é¢˜
- `app/globals.css` - æ³¨é‡Š
- `app/login/page.tsx` - Logo + åç§°
- `app/register/page.tsx` - Logo + åç§°
- `app/dashboard/team/page.tsx` - é‚€è¯·é“¾æ¥åŸŸå
- `app/dashboard/favorites/page.tsx` - åˆ›å»ºè€…åç§°

**ç»„ä»¶æ–‡ä»¶ (2ä¸ª)ï¼š**
- `components/dashboard/templates-grid.tsx` - æ¨¡æ¿ä½œè€…
- `components/landing/testimonials.tsx` - ç”¨æˆ·è¯„ä»·

**å›½é™…åŒ–æ–‡ä»¶ (1ä¸ª)ï¼š**
- `lib/i18n/translations.ts` - è‹±æ–‡å’Œä¸­æ–‡ç¿»è¯‘

**æœåŠ¡å’Œæ•°æ®åº“æ–‡ä»¶ (3ä¸ª)ï¼š**
- `lib/services/api-keys.ts` - åŠ å¯† salt åç§°
- `supabase/migrations/001_initial_schema.sql` - æ³¨é‡Š
- `supabase/seed.sql` - æ³¨é‡Š

**æ–‡æ¡£æ–‡ä»¶ (2ä¸ª)ï¼š**
- `docs/ENV-SETUP.md` - OAuth åº”ç”¨åç§°
- `docs/æ¡†æ¶.md` - é¡¹ç›®æ ‡é¢˜å’Œæœ¬æ¬¡æ›´æ”¹è®°å½•

#### 4. å“ç‰Œæ ‡è¯†

| å…ƒç´  | æ–°å€¼ |
|------|------|
| é¡¹ç›®åç§° | Promto |
| ç½‘ç«™åŸŸå | promto.org |
| Logo æ–‡ä»¶ | /public/apple-icon.png |
| ç‰ˆæƒå£°æ˜ | Â© 2025 Promto |

### å…³é”®è„šæœ¬

- éƒ¨ç½²è„šæœ¬ï¼š`/home/maxsong/deploy-cloudflared.sh`
- é‡å¯è„šæœ¬ï¼š`/home/maxsong/restart-cloudflared.sh`

---

## æ›´æ–°æ—¥å¿—

### 2025-12-03 - åˆå§‹éƒ¨ç½²

**å®Œæˆçš„å·¥ä½œï¼š**

1. **Node.js ç¯å¢ƒå‡çº§**
   - å®‰è£… nvm (Node Version Manager)
   - å‡çº§ Node.js ä» 18.19.1 åˆ° 20.19.6
   - æ»¡è¶³ Next.js 16 çš„è¿è¡Œè¦æ±‚

2. **Next.js åº”ç”¨å¯åŠ¨**
   - å®‰è£…é¡¹ç›®ä¾èµ–
   - å¯åŠ¨å¼€å‘æœåŠ¡å™¨åœ¨ http://localhost:3000
   - éªŒè¯åº”ç”¨æ­£å¸¸è¿è¡Œ

3. **Supabase é›†æˆ**
   - å®‰è£… Supabase CLI 2.65.2
   - åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ– Supabase
   - å®‰è£…å¹¶é…ç½® Docker
   - å¯åŠ¨æœ¬åœ° Supabase å®ä¾‹
   - æå–è®¤è¯å¯†é’¥å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯

4. **Cloudflared é…ç½®**
   - ä¿®å¤åŸæœ‰é…ç½®æ–‡ä»¶çš„ YAML è¯­æ³•é”™è¯¯
   - æ·»åŠ  Supabase Studio åŸŸåæ˜ å°„
   - æ›´æ–°é…ç½®åˆ°ç³»ç»Ÿç›®å½•
   - éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•

5. **æ–‡æ¡£å’Œè„šæœ¬**
   - åˆ›å»ºè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
   - åˆ›å»ºæœåŠ¡é‡å¯è„šæœ¬
   - ç¼–å†™å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£
   - åˆ›å»ºå¿«é€Ÿå¯åŠ¨æŒ‡å—
   - ç”Ÿæˆé¡¹ç›®æ¡†æ¶æ–‡æ¡£

**é…ç½®è¯¦æƒ…ï¼š**

- **åŸŸåæ˜ å°„ï¼š**
  - www.promto.org â†’ Next.js App (port 3000)
  - supabase.promto.org â†’ Supabase Studio (port 54323)

- **Tunnel IDï¼š** 9557c896-c0d5-4b97-b4d2-dc8fd8cd93b0

- **è®¤è¯å¯†é’¥ï¼š**
  - Publishable Key: sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH
  - Secret Key: sb_secret_N7UND0UgjKTVK-Uodkm0Hg_xSvEMPvz

**å¾…å®Œæˆäº‹é¡¹ï¼š**

1. é‡å¯ Cloudflared æœåŠ¡ï¼ˆè¿è¡Œ `./restart-cloudflared.sh`ï¼‰
2. åœ¨ Cloudflare DNS ä¸­æ·»åŠ  `supabase.promto.org` CNAME è®°å½•
3. éªŒè¯å…¬ç½‘åŸŸåè®¿é—®
4. ~~é…ç½® Next.js åº”ç”¨çš„ Supabase è¿æ¥~~ âœ… å·²å®Œæˆ
5. å¼€å‘ Prompt ä¼˜åŒ–æ ¸å¿ƒåŠŸèƒ½

---

### 2025-12-03 - Supabase å®¢æˆ·ç«¯é›†æˆ

**å®Œæˆçš„å·¥ä½œï¼š**

1. **å®‰è£…ä¾èµ–åŒ…**
   - @supabase/supabase-jsï¼šSupabase JavaScript å®¢æˆ·ç«¯åº“
   - @supabase/ssrï¼šNext.js SSR æ”¯æŒ

2. **åˆ›å»ºå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶**
   - `lib/supabase/client.ts`ï¼šæµè§ˆå™¨ç«¯å®¢æˆ·ç«¯ï¼ˆç”¨äºå®¢æˆ·ç«¯ç»„ä»¶ï¼‰
   - `lib/supabase/server.ts`ï¼šæœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯ï¼ˆç”¨äºæœåŠ¡å™¨ç»„ä»¶ã€Server Actionsã€Route Handlersï¼‰
   - `lib/supabase/middleware.ts`ï¼šä¸­é—´ä»¶è¾…åŠ©å‡½æ•°ï¼ˆç”¨äºä¼šè¯åˆ·æ–°ï¼‰

3. **é…ç½® Next.js ä¸­é—´ä»¶**
   - åˆ›å»º `middleware.ts` æ–‡ä»¶
   - é›†æˆ Supabase ä¼šè¯ç®¡ç†
   - é…ç½®è·¯ç”±åŒ¹é…è§„åˆ™

4. **ç¯å¢ƒå˜é‡é…ç½®**
   - åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆåŒ…å«å®é™…å‡­è¯ï¼‰
   - åˆ›å»º `.env.example` æ–‡ä»¶ï¼ˆç¤ºä¾‹æ¨¡æ¿ï¼‰
   - é…ç½®ä»¥ä¸‹å˜é‡ï¼š
     - NEXT_PUBLIC_SUPABASE_URL
     - NEXT_PUBLIC_SUPABASE_ANON_KEY
     - SUPABASE_SERVICE_ROLE_KEY
     - DATABASE_URL

5. **åˆ›å»ºè¾…åŠ©å‡½æ•°å’Œç±»å‹å®šä¹‰**
   - `lib/supabase/types.ts`ï¼šTypeScript ç±»å‹å®šä¹‰
   - `lib/supabase/hooks.ts`ï¼šReact Hooksï¼ˆuseUserã€useSessionï¼‰
   - `lib/supabase/index.ts`ï¼šç»Ÿä¸€å¯¼å‡ºæ–‡ä»¶
   - `lib/supabase/README.md`ï¼šå®Œæ•´ä½¿ç”¨æ–‡æ¡£

**æ–‡ä»¶ç»“æ„ï¼š**

```
lib/supabase/
â”œâ”€â”€ client.ts         # æµè§ˆå™¨ç«¯å®¢æˆ·ç«¯
â”œâ”€â”€ server.ts         # æœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯
â”œâ”€â”€ middleware.ts     # ä¸­é—´ä»¶è¾…åŠ©å‡½æ•°
â”œâ”€â”€ hooks.ts          # React Hooks (useUser, useSession)
â”œâ”€â”€ types.ts          # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ README.md         # ä½¿ç”¨æ–‡æ¡£

middleware.ts         # Next.js ä¸­é—´ä»¶ï¼ˆä¼šè¯ç®¡ç†ï¼‰
.env.local           # ç¯å¢ƒå˜é‡ï¼ˆæœ¬åœ°å¼€å‘ï¼‰
.env.example         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

å®¢æˆ·ç«¯ç»„ä»¶ï¼š
```typescript
'use client'
import { createClient } from '@/lib/supabase/client'
const supabase = createClient()
```

æœåŠ¡å™¨ç»„ä»¶ï¼š
```typescript
import { createClient } from '@/lib/supabase/server'
const supabase = await createClient()
```

React Hooksï¼š
```typescript
import { useUser } from '@/lib/supabase/hooks'
const { user, loading } = useUser()
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**

âœ… å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
âœ… æµè§ˆå™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯åˆ†ç¦»
âœ… è‡ªåŠ¨ä¼šè¯ç®¡ç†å’Œåˆ·æ–°
âœ… React Hooks ç®€åŒ–çŠ¶æ€ç®¡ç†
âœ… ç¬¦åˆ Next.js 15+ App Router æœ€ä½³å®è·µ
âœ… è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**

1. ~~åœ¨ Supabase Studio ä¸­åˆ›å»ºæ•°æ®åº“è¡¨~~ âœ… å·²å®Œæˆ
2. ä½¿ç”¨ `npx supabase gen types typescript --local` ç”Ÿæˆç±»å‹å®šä¹‰
3. ~~å¼€å§‹åœ¨åº”ç”¨ä¸­é›†æˆè®¤è¯å’Œæ•°æ®åº“åŠŸèƒ½~~ âœ… å·²å®Œæˆ
4. ~~å¼€å‘ Prompt ä¼˜åŒ–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘~~ âœ… å·²å®Œæˆ

---

### 2025-12-03 - V2.0 åç«¯æ¶æ„å®Œæ•´å®ç°

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. æ•°æ®åº“Schemaè®¾è®¡ä¸å®ç°

åˆ›å»ºäº†å®Œæ•´çš„æ•°æ®åº“è¿ç§»æ–‡ä»¶ `supabase/migrations/001_initial_schema.sql`ï¼š

**æ ¸å¿ƒè¡¨ç»“æ„ï¼š**
- `profiles` - ç”¨æˆ·æ‰©å±•ä¿¡æ¯ï¼ˆè§’è‰²ã€è®¢é˜…ç­‰çº§ã€ç§¯åˆ†ï¼‰
- `prompts` - æç¤ºè¯å­˜å‚¨ï¼ˆåŸå§‹å†…å®¹ã€ä¼˜åŒ–å†…å®¹ã€è¯„åˆ†ï¼‰
- `optimization_jobs` - å¼‚æ­¥ä¼˜åŒ–ä»»åŠ¡ç®¡ç†
- `evaluations` - LLMè¯„ä¼°è®°å½•ï¼ˆCOSTARè¯„åˆ†ç»´åº¦ï¼‰
- `usage_records` - ä½¿ç”¨é‡é…é¢è®°å½•

**æšä¸¾ç±»å‹ï¼š**
- `user_role`: user, pro, admin
- `subscription_tier`: free, pro, enterprise
- `optimization_mode`: quick, deep
- `job_status`: pending, processing, completed, failed, cancelled
- `ai_provider`: openai, anthropic

**è¾…åŠ©å‡½æ•°ï¼š**
- `increment_usage()` - å¢åŠ ä½¿ç”¨é‡
- `check_user_quota()` - æ£€æŸ¥é…é¢
- `get_user_stats()` - è·å–ç»Ÿè®¡ä¿¡æ¯

**RLSç­–ç•¥ï¼š** æ‰€æœ‰è¡¨å‡å¯ç”¨Row Level Securityï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ã€‚

#### 2. APIè·¯ç”±æ¶æ„

```
app/api/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ callback/route.ts     # OAuthå›è°ƒ
â”‚   â”œâ”€â”€ signin/route.ts       # é‚®ç®±ç™»å½•
â”‚   â”œâ”€â”€ signup/route.ts       # é‚®ç®±æ³¨å†Œ
â”‚   â”œâ”€â”€ signout/route.ts      # ç™»å‡º
â”‚   â””â”€â”€ oauth/route.ts        # OAuthå…¥å£
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ route.ts              # GETåˆ—è¡¨, POSTåˆ›å»º
â”‚   â””â”€â”€ [id]/route.ts         # GET/PUT/DELETEå•æ¡
â”œâ”€â”€ optimize/
â”‚   â”œâ”€â”€ quick/route.ts        # å¿«é€Ÿä¼˜åŒ–ï¼ˆæµå¼ï¼‰
â”‚   â””â”€â”€ deep/route.ts         # æ·±åº¦ä¼˜åŒ–ï¼ˆå¼‚æ­¥ï¼‰
â”œâ”€â”€ jobs/
â”‚   â””â”€â”€ [id]/route.ts         # ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢
â”œâ”€â”€ evaluate/
â”‚   â””â”€â”€ route.ts              # LLMè¯„ä¼°
â””â”€â”€ user/
    â”œâ”€â”€ profile/route.ts      # ç”¨æˆ·ä¿¡æ¯
    â””â”€â”€ usage/route.ts        # ä½¿ç”¨é‡ç»Ÿè®¡
```

#### 3. LLMé›†æˆï¼ˆVercel AI SDKï¼‰

å®‰è£…ä¾èµ–ï¼š`ai`, `@ai-sdk/openai`, `@ai-sdk/anthropic`

**Provideré…ç½®ï¼š**
```typescript
// lib/ai/providers.ts
- OpenAI: gpt-4o-mini (å¿«é€Ÿ), gpt-4o (æ·±åº¦/è¯„ä¼°)
- Anthropic: claude-3-5-haiku (å¿«é€Ÿ), claude-3-5-sonnet (æ·±åº¦/è¯„ä¼°)
```

**å…ƒæç¤ºè¯æ¨¡æ¿ï¼š**
- `lib/ai/prompts/quick-optimize.ts` - å¿«é€Ÿä¼˜åŒ–ç³»ç»Ÿæç¤ºè¯
- `lib/ai/prompts/deep-optimize.ts` - æ·±åº¦ä¼˜åŒ–ï¼ˆReflexion Loopï¼‰
- `lib/ai/prompts/evaluate.ts` - LLM-as-a-Judgeè¯„ä¼°

#### 4. æœåŠ¡å±‚è®¾è®¡

```
lib/services/
â”œâ”€â”€ prompt.ts         # PromptService - CRUDæ“ä½œ
â”œâ”€â”€ user.ts           # UserService - ç”¨æˆ·ç®¡ç†ã€é…é¢
â”œâ”€â”€ optimization.ts   # OptimizationService - ä¼˜åŒ–æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ evaluation.ts     # EvaluationService - LLMè¯„ä¼°
â””â”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
```

**OptimizationServiceæ ¸å¿ƒåŠŸèƒ½ï¼š**
- `quickOptimize()` - å•æ¬¡LLMè°ƒç”¨ä¼˜åŒ–
- `quickOptimizeStream()` - æµå¼å“åº”ä¼˜åŒ–
- `createDeepOptimizeJob()` - åˆ›å»ºå¼‚æ­¥æ·±åº¦ä¼˜åŒ–ä»»åŠ¡
- `processDeepOptimizeJob()` - Reflexion Loopè¿­ä»£å¤„ç†

**EvaluationServiceæ ¸å¿ƒåŠŸèƒ½ï¼š**
- `evaluate()` - COSTARç»´åº¦è¯„ä¼°
- `getHistory()` - è·å–è¯„ä¼°å†å²
- `compare()` - å¯¹æ¯”ä¸¤ä¸ªæç¤ºè¯

#### 5. è®¤è¯ç³»ç»Ÿå®Œå–„

**APIè·¯ç”±ï¼š**
- POST `/api/auth/signin` - é‚®ç®±å¯†ç ç™»å½•
- POST `/api/auth/signup` - é‚®ç®±æ³¨å†Œ
- POST `/api/auth/signout` - ç™»å‡º
- POST `/api/auth/oauth` - OAuthå…¥å£ï¼ˆGitHub/Googleï¼‰
- GET `/api/auth/callback` - OAuthå›è°ƒå¤„ç†

**ä¸­é—´ä»¶ä¿æŠ¤ï¼š**
- å—ä¿æŠ¤è·¯ç”±ï¼š/dashboard, /api/prompts, /api/optimize/deep, /api/evaluate, /api/user, /api/jobs
- è®¤è¯è·¯ç”±ï¼š/login, /registerï¼ˆå·²ç™»å½•é‡å®šå‘åˆ°dashboardï¼‰
- å…¬å¼€APIï¼š/api/auth, /api/optimize/quickï¼ˆå…è®¸åŒ¿åä½¿ç”¨ï¼‰

#### 6. æ•°æ®éªŒè¯ï¼ˆZodï¼‰

```
lib/validators/
â”œâ”€â”€ prompt.ts         # æ‰€æœ‰éªŒè¯Schema
â””â”€â”€ index.ts
```

**éªŒè¯Schemaï¼š**
- CreatePromptSchema, UpdatePromptSchema, ListPromptsSchema
- QuickOptimizeSchema, DeepOptimizeSchema
- EvaluatePromptSchema, UpdateProfileSchema

#### 7. APIå·¥å…·å‡½æ•°

```
lib/api/
â”œâ”€â”€ utils.ts          # å“åº”ã€è®¤è¯ã€é™æµç­‰å·¥å…·å‡½æ•°
â””â”€â”€ index.ts
```

**åŠŸèƒ½ï¼š**
- `successResponse()`, `errorResponse()` - ç»Ÿä¸€å“åº”æ ¼å¼
- `requireAuth()` - è®¤è¯æ£€æŸ¥
- `parseBody()`, `parseQuery()` - è¯·æ±‚è§£æéªŒè¯
- `withErrorHandler()` - ç»Ÿä¸€é”™è¯¯å¤„ç†
- `withRateLimit()` - é™æµä¸­é—´ä»¶

**æ–‡ä»¶ç»“æ„æ€»è§ˆï¼š**

```
lib/
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ providers.ts              # AI Provideré…ç½®
â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”œâ”€â”€ quick-optimize.ts     # å¿«é€Ÿä¼˜åŒ–æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ deep-optimize.ts      # æ·±åº¦ä¼˜åŒ–æç¤ºè¯
â”‚   â”‚   â””â”€â”€ evaluate.ts           # è¯„ä¼°æç¤ºè¯
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ utils.ts                  # APIå·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ prompt.ts                 # æç¤ºè¯æœåŠ¡
â”‚   â”œâ”€â”€ user.ts                   # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ optimization.ts           # ä¼˜åŒ–æœåŠ¡
â”‚   â”œâ”€â”€ evaluation.ts             # è¯„ä¼°æœåŠ¡
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ validators/
â”‚   â”œâ”€â”€ prompt.ts                 # éªŒè¯Schema
â”‚   â””â”€â”€ index.ts
â””â”€â”€ supabase/                     # å·²æœ‰
    â””â”€â”€ ...

supabase/
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 001_initial_schema.sql    # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ seed.sql                      # ç§å­æ•°æ®
â””â”€â”€ config.toml                   # å·²æœ‰

docs/
â”œâ”€â”€ æ¡†æ¶.md                        # æœ¬æ–‡æ¡£
â”œâ”€â”€ ENV-SETUP.md                  # ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ ...
```

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**

1. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š`supabase db reset`
2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒ `docs/ENV-SETUP.md`ï¼‰
3. ~~å¼€å‘å‰ç«¯UIç•Œé¢~~ âœ… å·²å®Œæˆè®¾ç½®é¡µé¢
4. æµ‹è¯•å®Œæ•´çš„ä¼˜åŒ–æµç¨‹

---

### 2025-12-03 - V3.0 å¤šAI Provideræ”¯æŒä¸ç”¨æˆ·é…ç½®

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. æ–°å¢AI Provideræ”¯æŒ

- **OpenRouterï¼ˆé»˜è®¤ï¼‰** - èšåˆå¹³å°ï¼Œä¸€ä¸ªKeyè®¿é—®æ‰€æœ‰æ¨¡å‹
- **Google Gemini** - æ”¯æŒ Gemini 2.0/1.5 ç³»åˆ—
- **ä¿ç•™ OpenAI å’Œ Anthropic** - ç›´è¿æ”¯æŒ

#### 2. ç”¨æˆ·è‡ªå®šä¹‰API Keyé…ç½®

**æ•°æ®åº“è¿ç§»** `supabase/migrations/002_user_api_keys.sql`ï¼š
- `user_api_keys` è¡¨ - åŠ å¯†å­˜å‚¨ç”¨æˆ·çš„API Key
- RLSç­–ç•¥ - ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„Key
- è¾…åŠ©å‡½æ•° - `get_user_api_keys_info()`, `has_api_key()`

**API KeyæœåŠ¡** `lib/services/api-keys.ts`ï¼š
- AES-256-GCMåŠ å¯†å­˜å‚¨
- æ”¯æŒéªŒè¯å„Providerçš„Keyæœ‰æ•ˆæ€§
- è„±æ•æ˜¾ç¤ºï¼ˆåªæ˜¾ç¤ºå‰å4ä½ï¼‰

#### 3. å®æ—¶æ¨¡å‹åˆ—è¡¨è·å–

**æ¨¡å‹æœåŠ¡** `lib/services/models.ts`ï¼š
```typescript
fetchOpenRouterModels()  // GET openrouter.ai/api/v1/models
fetchOpenAIModels()      // GET api.openai.com/v1/models
fetchGeminiModels()      // GET generativelanguage.googleapis.com/v1beta/models
getAnthropicModels()     // ç¡¬ç¼–ç åˆ—è¡¨ï¼ˆæ— å…¬å¼€APIï¼‰
```

#### 4. æ–°å¢APIè·¯ç”±

| è·¯ç”± | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/settings/api-keys` | GET | è·å–ç”¨æˆ·é…ç½®çš„API Keysä¿¡æ¯ |
| `/api/settings/api-keys` | POST | ä¿å­˜API Keyï¼ˆè‡ªåŠ¨éªŒè¯ï¼‰ |
| `/api/settings/api-keys` | PUT | è®¾ç½®é»˜è®¤Provider |
| `/api/settings/api-keys/[provider]` | DELETE | åˆ é™¤æŒ‡å®šProviderçš„Key |
| `/api/settings/api-keys/[provider]` | POST | éªŒè¯æŒ‡å®šProviderçš„Key |
| `/api/models` | GET | è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨ |
| `/api/models/validate` | POST | éªŒè¯API Keyæœ‰æ•ˆæ€§ |

#### 5. è®¾ç½®é¡µé¢UI

**è®¾ç½®é¡µé¢** `app/settings/api-keys/page.tsx`ï¼š
- æ˜¾ç¤ºæ‰€æœ‰Provideré…ç½®çŠ¶æ€
- æ”¯æŒæ·»åŠ /æ›´æ¢/åˆ é™¤API Key
- éªŒè¯Keyæœ‰æ•ˆæ€§
- è®¾ç½®é»˜è®¤Provider
- è·å–Keyé“¾æ¥è·³è½¬

#### 6. åŠ¨æ€æ¨¡å‹é€‰æ‹©å™¨ç»„ä»¶

**ç»„ä»¶** `components/ui/dynamic-model-selector.tsx`ï¼š
- å®æ—¶ä»APIè·å–æ¨¡å‹åˆ—è¡¨
- æŒ‰Provideråˆ†ç»„æ˜¾ç¤º
- æ˜¾ç¤ºæ¨¡å‹æ ‡ç­¾ï¼ˆæ¨è/å…è´¹/æ¨ç†ï¼‰
- æ˜¾ç¤ºä¸Šä¸‹æ–‡é•¿åº¦ä¿¡æ¯

#### 7. Provideré…ç½®æ›´æ–°

**æ›´æ–°** `lib/ai/providers.ts`ï¼š
```typescript
// æ”¯æŒ4ä¸ªProvider
export type AIProvider = 'openai' | 'anthropic' | 'gemini' | 'openrouter'

// é»˜è®¤ä½¿ç”¨OpenRouter
export const DEFAULT_PROVIDER: AIProvider = 'openrouter'

// æ”¯æŒè‡ªå®šä¹‰API Key
export function getModel(provider, modelId, apiKey?)
export function getQuickModel(provider?, apiKey?)
export function getDeepModel(provider?, apiKey?)
```

**æ–‡ä»¶ç»“æ„æ›´æ–°ï¼š**

```
æ–°å¢æ–‡ä»¶ï¼š
â”œâ”€â”€ supabase/migrations/
â”‚   â””â”€â”€ 002_user_api_keys.sql      # ç”¨æˆ·API Keyè¡¨
â”œâ”€â”€ lib/services/
â”‚   â”œâ”€â”€ api-keys.ts                # API KeyæœåŠ¡ï¼ˆåŠ å¯†/éªŒè¯ï¼‰
â”‚   â””â”€â”€ models.ts                  # æ¨¡å‹åˆ—è¡¨æœåŠ¡ï¼ˆå®æ—¶è·å–ï¼‰
â”œâ”€â”€ app/api/
â”‚   â”œâ”€â”€ settings/api-keys/
â”‚   â”‚   â”œâ”€â”€ route.ts               # GET/POST/PUT
â”‚   â”‚   â””â”€â”€ [provider]/route.ts    # DELETE/POST(éªŒè¯)
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ route.ts               # GET æ¨¡å‹åˆ—è¡¨
â”‚       â””â”€â”€ validate/route.ts      # POST éªŒè¯Key
â”œâ”€â”€ app/settings/
â”‚   â”œâ”€â”€ layout.tsx                 # è®¾ç½®é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                   # é‡å®šå‘åˆ°api-keys
â”‚   â””â”€â”€ api-keys/page.tsx          # API Keyé…ç½®é¡µé¢
â””â”€â”€ components/ui/
    â””â”€â”€ dynamic-model-selector.tsx # åŠ¨æ€æ¨¡å‹é€‰æ‹©å™¨
```

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**

1. è¿è¡Œæ–°çš„æ•°æ®åº“è¿ç§»ï¼š`supabase db reset`
2. è®¿é—® `/settings/api-keys` é…ç½®API Key
3. åœ¨ä¼˜åŒ–é¡µé¢é›†æˆåŠ¨æ€æ¨¡å‹é€‰æ‹©å™¨
4. æµ‹è¯•å®Œæ•´çš„å¤šProviderä¼˜åŒ–æµç¨‹

---

---

### 2025-12-04 - V5.0 Landing Page ä¼˜åŒ–ä¸ Docs é¡µé¢

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. How it works è¿æ¥çº¿ä¿®å¤

**é—®é¢˜ï¼š** è¿æ¥æ¨ªçº¿ä½ç½®åå·®ï¼Œæ— æ³•æ­£ç¡®è¿æ¥ç›¸é‚»çš„æ­¥éª¤å¡ç‰‡ã€‚

**è§£å†³æ–¹æ¡ˆï¼š** 
- é‡æ„è¿æ¥çº¿å¸ƒå±€ï¼Œä½¿ç”¨ç‹¬ç«‹çš„è¿æ¥çº¿å®¹å™¨
- æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œè¿æ¥çº¿éšæ»šåŠ¨é€æ¸å±•ç°
- ä¼˜åŒ–å®šä½è®¡ç®—ï¼Œç¡®ä¿åœ¨ 4 åˆ—å¸ƒå±€ä¸‹æ­£ç¡®å¯¹é½

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/landing/how-it-works.tsx`

#### 2. Landing Page æ»šåŠ¨æ¸å…¥åŠ¨ç”»

**é—®é¢˜ï¼š** é¡µé¢ç¼ºä¹æ»šåŠ¨æ—¶çš„åŠ¨ç”»æ•ˆæœï¼Œç”¨æˆ·ä½“éªŒä¸å¤Ÿæµç•…ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- ä¸ºæ‰€æœ‰ landing ç»„ä»¶æ·»åŠ  `FadeIn` å’Œ `StaggerContainer` åŠ¨ç”»
- æ ‡é¢˜å’Œå†…å®¹åŒºåŸŸåˆ†åˆ«é‡‡ç”¨ä¸åŒçš„åŠ¨ç”»å»¶è¿Ÿ
- å¡ç‰‡ç»„ä»¶æ”¯æŒæ‚¬åœç¼©æ”¾å’Œé˜´å½±æ•ˆæœ
- ä½¿ç”¨ `whileInView` å®ç°è§†å£è§¦å‘åŠ¨ç”»

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- `components/landing/features-section.tsx` - åŠŸèƒ½å¡ç‰‡äº¤é”™åŠ¨ç”»
- `components/landing/how-it-works.tsx` - æ­¥éª¤å¡ç‰‡é€ä¸ªå‡ºç°
- `components/landing/use-cases.tsx` - ç”¨ä¾‹å¡ç‰‡æ‚¬åœæ•ˆæœ
- `components/landing/testimonials.tsx` - è¯„ä»·å¡ç‰‡æ˜Ÿæ˜ŸåŠ¨ç”»
- `components/landing/pricing-section.tsx` - ä»·æ ¼å¡ç‰‡ç¼©æ”¾æ•ˆæœ

#### 3. Docs æ–‡æ¡£é¡µé¢

**æ–°å¢ï¼š** å®Œæ•´çš„æ–‡æ¡£ä¸­å¿ƒé¡µé¢ `/docs`

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- å“åº”å¼ä¾§è¾¹æ å¯¼èˆª
- 6 ä¸ªä¸»è¦æ–‡æ¡£æ¿å—ï¼š
  - å¿«é€Ÿå¼€å§‹ï¼ˆGetting Startedï¼‰
  - åŠŸèƒ½ä»‹ç»ï¼ˆFeaturesï¼‰
  - ä½¿ç”¨æ•™ç¨‹ï¼ˆHow to Useï¼‰
  - æœ€ä½³å®è·µï¼ˆBest Practicesï¼‰
  - API æ–‡æ¡£ï¼ˆAPI Referenceï¼‰
  - å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰
- ä¸­è‹±æ–‡åŒè¯­æ”¯æŒ
- ä»£ç å—å¤åˆ¶åŠŸèƒ½
- å¯å±•å¼€çš„ FAQ æ‰‹é£ç´ç»„ä»¶
- ä¸ç°æœ‰è®¾è®¡é£æ ¼ä¿æŒä¸€è‡´

**æ–°å¢æ–‡ä»¶ï¼š** `app/docs/page.tsx`

#### 4. é¦–æ¬¡åŠ è½½é»‘å±é—®é¢˜ä¿®å¤

**é—®é¢˜ï¼š** é¦–æ¬¡è®¿é—®é¡µé¢æ—¶å‡ºç°é»‘å±ï¼Œéœ€è¦åˆ·æ–°æ‰èƒ½æ˜¾ç¤ºå†…å®¹ã€‚

**åŸå› åˆ†æï¼š**
- framer-motion çš„ `initial={{ opacity: 0 }}` åœ¨ SSR æ—¶å¯¼è‡´å†…å®¹ä¸å¯è§
- å®¢æˆ·ç«¯ hydration å‰åŠ¨ç”»æœªåˆå§‹åŒ–

**è§£å†³æ–¹æ¡ˆï¼š**
- åœ¨ `PageWrapper` ç»„ä»¶ä¸­æ·»åŠ  `mounted` çŠ¶æ€æ£€æŸ¥
- æœªæŒ‚è½½æ—¶ç›´æ¥æ¸²æŸ“å†…å®¹ï¼ˆæ— åŠ¨ç”»ï¼‰ï¼Œé¿å…é»‘å±
- æŒ‚è½½ååº”ç”¨å®Œæ•´çš„åŠ¨ç”»æ•ˆæœ
- åŒæ ·ä¿®å¤äº† Dashboard é¡µé¢çš„ç›¸åŒé—®é¢˜

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- `components/layout/page-wrapper.tsx` - Landing page ä½¿ç”¨
- `app/dashboard/page.tsx` - Dashboard é¡µé¢

#### 5. æ–‡ä»¶ä¿®æ”¹æ¸…å•

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| `components/landing/how-it-works.tsx` | ä¿®æ”¹ | è¿æ¥çº¿ä¿®å¤ + åŠ¨ç”» |
| `components/landing/features-section.tsx` | ä¿®æ”¹ | æ·»åŠ æ»šåŠ¨åŠ¨ç”» |
| `components/landing/use-cases.tsx` | ä¿®æ”¹ | æ·»åŠ æ»šåŠ¨åŠ¨ç”» |
| `components/landing/testimonials.tsx` | ä¿®æ”¹ | æ·»åŠ æ»šåŠ¨åŠ¨ç”» |
| `components/landing/pricing-section.tsx` | ä¿®æ”¹ | æ·»åŠ æ»šåŠ¨åŠ¨ç”» |
| `components/layout/page-wrapper.tsx` | ä¿®æ”¹ | ä¿®å¤é»‘å±é—®é¢˜ |
| `app/dashboard/page.tsx` | ä¿®æ”¹ | ä¿®å¤é»‘å±é—®é¢˜ |
| `app/docs/page.tsx` | æ–°å¢ | æ–‡æ¡£ä¸­å¿ƒé¡µé¢ |

---

### 2025-12-04 - V5.6 OAuthç™»å½•ä¿®å¤

**é—®é¢˜æè¿°ï¼š**

1. **Googleç™»å½•åè®®é”™è¯¯**ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹ï¼ŒGoogle OAuth ç™»å½•åä¼šè·³è½¬åˆ° `https://localhost:3000`ï¼ˆHTTPSï¼‰ï¼Œè€Œä¸æ˜¯æ­£ç¡®çš„ `http://localhost:3000`ï¼ˆHTTPï¼‰ï¼Œå¯¼è‡´æµè§ˆå™¨æ— æ³•è®¿é—®ã€‚

2. **GitHubç™»å½•å›è°ƒé”™è¯¯**ï¼šGitHub OAuth ç™»å½•æ—¶æŠ¥é”™ "The redirect_uri is not associated with this application"ï¼Œè¯´æ˜ GitHub OAuth App é…ç½®çš„å›è°ƒ URL ä¸å®é™…ä½¿ç”¨çš„ä¸åŒ¹é…ã€‚

**é—®é¢˜åˆ†æï¼š**

- OAuth è·¯ç”±ä¸­çš„ `origin` è·å–é€»è¾‘æ²¡æœ‰æ­£ç¡®å¤„ç†æœ¬åœ°å¼€å‘ç¯å¢ƒ
- `request.nextUrl.protocol` æˆ–æµè§ˆå™¨çš„ HSTS å¯èƒ½å¯¼è‡´åè®®è¢«é”™è¯¯åœ°å‡çº§ä¸º HTTPS
- GitHub OAuth App çš„å›è°ƒ URL é…ç½®éœ€è¦ä¸ Supabase URL åŒ¹é…

**è§£å†³æ–¹æ¡ˆï¼š**

#### 1. ä¿®æ”¹ OAuth å…¥å£è·¯ç”±

**æ–‡ä»¶ï¼š** `app/api/auth/oauth/route.ts`

æ·»åŠ  `getAppOrigin()` å‡½æ•°ï¼š
- æ£€æµ‹æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆlocalhost/127.0.0.1ï¼‰
- æœ¬åœ°ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨ HTTP åè®®
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ `NEXT_PUBLIC_APP_URL` ç¯å¢ƒå˜é‡

```typescript
function getAppOrigin(request: Request): string {
  const url = new URL(request.url)
  const host = url.host
  
  // æœ¬åœ°å¼€å‘ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨ http
  const isLocalhost = host.includes('localhost') || host.includes('127.0.0.1')
  if (isLocalhost) {
    return `http://${host}`
  }
  
  // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡
  const appUrl = process.env.NEXT_PUBLIC_APP_URL
  if (appUrl) {
    return appUrl.replace(/\/$/, '')
  }
  
  return request.headers.get('origin') || `${url.protocol}//${host}`
}
```

#### 2. ä¿®æ”¹ OAuth å›è°ƒè·¯ç”±

**æ–‡ä»¶ï¼š** `app/api/auth/callback/route.ts`

æ·»åŠ ç›¸åŒçš„ `getAppOrigin()` é€»è¾‘ï¼Œç¡®ä¿å›è°ƒåçš„é‡å®šå‘ä½¿ç”¨æ­£ç¡®çš„åè®®ã€‚

#### 3. æ›´æ–° Supabase é…ç½®

**æ–‡ä»¶ï¼š** `supabase/config.toml`

æ‰©å±• `additional_redirect_urls`ï¼Œæ”¯æŒ HTTPS ç‰ˆæœ¬çš„ localhostï¼ˆåº”å¯¹æµè§ˆå™¨ HSTS ç­‰æƒ…å†µï¼‰ï¼š

```toml
additional_redirect_urls = [
  "https://www.promto.org",
  "http://localhost:3000",
  "https://localhost:3000",
  "http://127.0.0.1:3000",
  "https://127.0.0.1:3000"
]
```

**æ–‡ä»¶ä¿®æ”¹æ¸…å•ï¼š**

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| `app/api/auth/oauth/route.ts` | ä¿®æ”¹ | æ·»åŠ æœ¬åœ°ç¯å¢ƒæ£€æµ‹ï¼Œå¼ºåˆ¶ä½¿ç”¨ HTTP |
| `app/api/auth/callback/route.ts` | ä¿®æ”¹ | æ·»åŠ æœ¬åœ°ç¯å¢ƒæ£€æµ‹ï¼Œä¿®å¤é‡å®šå‘åè®® |
| `supabase/config.toml` | ä¿®æ”¹ | æ·»åŠ  HTTPS localhost åˆ°å…è®¸çš„é‡å®šå‘ URL |

**å…³äº GitHub OAuth é…ç½®ï¼š**

å¦‚æœ GitHub ç™»å½•ä»ç„¶æŠ¥é”™ï¼Œè¯·æ£€æŸ¥ GitHub OAuth App çš„é…ç½®ï¼š

1. è®¿é—® https://github.com/settings/developers
2. ç‚¹å‡»æ‚¨çš„ OAuth App
3. ç¡®è®¤ "Authorization callback URL" è®¾ç½®ä¸ºï¼š
   - **å…¬ç½‘ç¯å¢ƒ**ï¼š`https://api.promto.org/auth/v1/callback`
   - **æœ¬åœ°å¼€å‘**ï¼š`http://127.0.0.1:54321/auth/v1/callback`

**æ³¨æ„**ï¼šå›è°ƒ URL å¿…é¡»ä¸ `.env.local` ä¸­çš„ `NEXT_PUBLIC_SUPABASE_URL` å¯¹åº”ï¼š
- å¦‚æœä½¿ç”¨ `NEXT_PUBLIC_SUPABASE_URL=https://api.promto.org`ï¼Œåˆ™å›è°ƒ URL åº”ä¸º `https://api.promto.org/auth/v1/callback`
- å¦‚æœä½¿ç”¨ `NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321`ï¼Œåˆ™å›è°ƒ URL åº”ä¸º `http://127.0.0.1:54321/auth/v1/callback`

---

### 2025-12-04 - V5.7 é‚®ç®±é‡å¤æ£€æµ‹ä¸æ³¨å†Œä¼˜åŒ–

**é—®é¢˜æè¿°ï¼š**

ç”¨æˆ·å¯èƒ½ä½¿ç”¨ç›¸åŒé‚®ç®±é€šè¿‡ä¸åŒæ–¹å¼ï¼ˆé‚®ç®±æ³¨å†Œã€Googleç™»å½•ã€GitHubç™»å½•ï¼‰è¿›è¡Œæ³¨å†Œï¼Œå¯¼è‡´è´¦å·æ··ä¹±ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

#### 1. æ–°å¢é‚®ç®±æ£€æµ‹ API

**æ–‡ä»¶ï¼š** `app/api/auth/check-email/route.ts`

**ç«¯ç‚¹ï¼š** `GET /api/auth/check-email?email=xxx`

**åŠŸèƒ½ï¼š**
- éªŒè¯é‚®ç®±æ ¼å¼
- æŸ¥è¯¢ `profiles` è¡¨æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
- è¿”å› `{ exists: boolean, provider: string | null }`
- é™æµä¿æŠ¤ï¼ˆæ¯åˆ†é’Ÿ30æ¬¡ï¼‰ï¼Œé˜²æ­¢é‚®ç®±æšä¸¾æ”»å‡»

```typescript
// å“åº”ç¤ºä¾‹
{
  "success": true,
  "data": {
    "exists": true,
    "provider": "unknown"
  }
}
```

#### 2. æ³¨å†Œé¡µé¢ä¼˜åŒ–

**æ–‡ä»¶ï¼š** `app/register/page.tsx`

**æ–°å¢åŠŸèƒ½ï¼š**
- **å®æ—¶é‚®ç®±æ£€æµ‹**ï¼šè¾“å…¥é‚®ç®±å 500ms è‡ªåŠ¨æ£€æµ‹æ˜¯å¦å·²æ³¨å†Œ
- **çŠ¶æ€å¯è§†åŒ–**ï¼š
  - ğŸ”„ æ£€æµ‹ä¸­ï¼šæ˜¾ç¤ºåŠ è½½åŠ¨ç”»
  - âœ… å¯ç”¨ï¼šç»¿è‰²å¯¹å‹¾ + "é‚®ç®±å¯ç”¨"
  - âŒ å·²æ³¨å†Œï¼šçº¢è‰²è­¦å‘Š + "è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·ç›´æ¥ç™»å½•"
  - âš ï¸ æ ¼å¼æ— æ•ˆï¼šé»„è‰²è­¦å‘Š + "è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"
- **è¡¨å•éªŒè¯**ï¼šé‚®ç®±å·²è¢«æ³¨å†Œæ—¶ç¦ç”¨æäº¤æŒ‰é’®
- **çœŸå® API è°ƒç”¨**ï¼šæäº¤è¡¨å•æ—¶è°ƒç”¨ `/api/auth/signup` API
- **é”™è¯¯å¤„ç†**ï¼šæ˜¾ç¤ºæ³¨å†Œå¤±è´¥ã€ç½‘ç»œé”™è¯¯ç­‰æç¤º

**é‚®ç®±çŠ¶æ€ç±»å‹ï¼š**
```typescript
type EmailStatus = 'idle' | 'checking' | 'available' | 'taken' | 'error' | 'invalid'
```

#### 3. å¤šè¯­è¨€æ”¯æŒ

**æ–‡ä»¶ï¼š** `lib/i18n/translations.ts`

**æ–°å¢ç¿»è¯‘ï¼ˆè‹±æ–‡ï¼‰ï¼š**
```typescript
register: {
  // ...existing fields
  emailTaken: "This email is already registered. Please sign in instead.",
  emailAvailable: "Email is available",
  emailInvalid: "Please enter a valid email address",
  emailChecking: "Checking email...",
  passwordMismatch: "Passwords do not match",
  checkEmail: "Please verify email first",
  registerError: "Registration failed. Please try again.",
  networkError: "Network error. Please try again later.",
}
```

**æ–°å¢ç¿»è¯‘ï¼ˆä¸­æ–‡ï¼‰ï¼š**
```typescript
register: {
  // ...existing fields
  emailTaken: "è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·ç›´æ¥ç™»å½•",
  emailAvailable: "é‚®ç®±å¯ç”¨",
  emailInvalid: "è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€",
  emailChecking: "æ­£åœ¨æ£€æŸ¥é‚®ç®±...",
  passwordMismatch: "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´",
  checkEmail: "è¯·å…ˆéªŒè¯é‚®ç®±",
  registerError: "æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•",
  networkError: "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
}
```

**æ–‡ä»¶ä¿®æ”¹æ¸…å•ï¼š**

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| `app/api/auth/check-email/route.ts` | æ–°å¢ | é‚®ç®±æ£€æµ‹ API |
| `app/register/page.tsx` | ä¿®æ”¹ | æ·»åŠ å®æ—¶é‚®ç®±æ£€æµ‹ã€çœŸå® API è°ƒç”¨ |
| `lib/i18n/translations.ts` | ä¿®æ”¹ | æ·»åŠ é‚®ç®±æ£€æµ‹ç›¸å…³ç¿»è¯‘ |

**ç”¨æˆ·ä½“éªŒæå‡ï¼š**

1. ç”¨æˆ·åœ¨è¾“å…¥é‚®ç®±æ—¶å³å¯çŸ¥é“æ˜¯å¦å¯ç”¨ï¼Œæ— éœ€ç­‰åˆ°æäº¤è¡¨å•
2. æ¸…æ™°çš„è§†è§‰åé¦ˆï¼Œä½¿ç”¨é¢œè‰²å’Œå›¾æ ‡åŒºåˆ†ä¸åŒçŠ¶æ€
3. é˜²æ­¢é‡å¤æ³¨å†Œï¼Œå¼•å¯¼å·²æ³¨å†Œç”¨æˆ·å‰å¾€ç™»å½•é¡µ
4. å®Œæ•´çš„é”™è¯¯å¤„ç†ï¼Œæä¾›å‹å¥½çš„é”™è¯¯æç¤º

---

### 2025-12-04 - V6.0 Dashboard åŠŸèƒ½å¢å¼º

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. AIæ¨¡å‹é…ç½®ç‹¬ç«‹é¡µé¢

**æ–°å¢æ–‡ä»¶ï¼š** `app/dashboard/models/page.tsx`

**åŠŸèƒ½ï¼š**
- æœåŠ¡å•†é€‰æ‹©ï¼ˆOpenAIã€Anthropicã€Google Geminiã€OpenRouterã€Promto AIï¼‰
- æ¨¡å‹é€‰æ‹©å™¨ï¼ˆæ¯ä¸ªæœåŠ¡å•†å¯¹åº”çš„å¯ç”¨æ¨¡å‹ï¼‰
- å¾®è°ƒå‚æ•°è®¾ç½®ï¼ˆtemperatureã€max_tokensã€top_pã€frequency_penaltyã€presence_penaltyï¼‰
- Promto AI ä½œä¸ºå ä½ç¬¦é€‰é¡¹ï¼Œæ˜¾ç¤º"å³å°†æ¨å‡º"
- å½“å‰é…ç½®æ‘˜è¦æ˜¾ç¤º

**ç›¸å…³æ–‡ä»¶ï¼š**
- `lib/contexts/model-config-context.tsx` - å…¨å±€æ¨¡å‹é…ç½®Context
- `components/ui/model-selector.tsx` - æ›´æ–°ä¸ºä½¿ç”¨Context
- `app/dashboard/layout.tsx` - æ·»åŠ ModelConfigProvider

#### 2. å†å²è®°å½•ç•Œé¢ä¼˜åŒ–ï¼ˆæ”¯æŒäºŒæ¬¡ä¼˜åŒ–ï¼‰

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/dashboard/history-list.tsx`

**æ–°å¢åŠŸèƒ½ï¼š**
- ç‚¹å‡»å†å²è®°å½•é¡¹å±•å¼€è¯¦æƒ…é¢æ¿
- æ˜¾ç¤ºåŸå§‹Promptå’Œä¼˜åŒ–åç»“æœ
- "å†æ¬¡ä¼˜åŒ–"æŒ‰é’® â†’ è·³è½¬åˆ°Dashboardä¸»é¡µå¹¶å¡«å……åŸå§‹å†…å®¹
- "åŸºäºæ­¤ä¼˜åŒ–"æŒ‰é’® â†’ ä»¥ä¼˜åŒ–ç»“æœä¸ºåŸºç¡€ç»§ç»­ä¼˜åŒ–
- å¯¹æ¯”è§†å›¾ï¼ˆåŸå§‹ vs ä¼˜åŒ–ç‰ˆæœ¬ï¼Œå¸¦é¢œè‰²åŒºåˆ†ï¼‰
- å¤åˆ¶æŒ‰é’®æ”¯æŒ

#### 3. Templatesç•Œé¢å®Œå–„

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/dashboard/templates-grid.tsx`

**æ–°å¢åŠŸèƒ½ï¼š**
- **åˆ›å»ºæ¨¡æ¿**ï¼šæ·»åŠ "æ–°å»ºæ¨¡æ¿"æŒ‰é’®å’Œæ¨¡æ€æ¡†
- **ç¼–è¾‘æ¨¡æ¿**ï¼šæ”¯æŒä¿®æ”¹å·²æœ‰è‡ªå®šä¹‰æ¨¡æ¿
- **åˆ é™¤æ¨¡æ¿**ï¼šç¡®è®¤åˆ é™¤åŠŸèƒ½
- **æ¨¡æ¿åˆ†ç±»ç®¡ç†**ï¼šæ·»åŠ è‡ªå®šä¹‰åˆ†ç±»
- **æ”¶è—åŠŸèƒ½**ï¼šæ ‡è®°å¸¸ç”¨æ¨¡æ¿
- **å¯¼å…¥/å¯¼å‡º**ï¼šJSONæ ¼å¼å¯¼å…¥å¯¼å‡ºæ¨¡æ¿

#### 4. TeamspaceèŠå¤©ç•Œé¢

**æ–°å¢æ–‡ä»¶ï¼š**
- `app/dashboard/team/chat/page.tsx` - å›¢é˜ŸèŠå¤©é¡µé¢
- `supabase/migrations/004_team_chat.sql` - æ•°æ®åº“è¿ç§»

**åŠŸèƒ½ï¼š**
- å®æ—¶èŠå¤©æ¶ˆæ¯åˆ—è¡¨
- æ¶ˆæ¯è¾“å…¥æ¡†ï¼ˆæ”¯æŒæ–‡æœ¬ã€@æåŠï¼‰
- åˆ†äº«Promptåˆ°èŠå¤©
- é›†æˆAIåŠ©æ‰‹ï¼ˆ@AI å‘¼å«ï¼‰
- åœ¨çº¿æˆå‘˜åˆ—è¡¨
- æ¶ˆæ¯ååº”ï¼ˆè¡¨æƒ…ï¼‰
- å›å¤æ¶ˆæ¯åŠŸèƒ½

**æ•°æ®åº“è¡¨ï¼š**
- `teams` - å›¢é˜Ÿä¿¡æ¯
- `team_members` - å›¢é˜Ÿæˆå‘˜
- `team_messages` - èŠå¤©æ¶ˆæ¯
- `team_message_reactions` - æ¶ˆæ¯ååº”

#### 5. Googleç™»å½•ä¸ªäººèµ„æ–™åŒæ­¥

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/profile/page.tsx`

**ä¿®å¤å†…å®¹ï¼š**
- é¡µé¢åŠ è½½æ—¶è°ƒç”¨`/api/user/profile`è·å–æ•°æ®åº“ä¸­çš„profileæ•°æ®
- ä»`user.user_metadata`åŒæ­¥Google/GitHubå¤´åƒã€å§“å
- "ä»OAuthåŒæ­¥ä¿¡æ¯"æŒ‰é’®
- æ˜¾ç¤ºå·²è¿æ¥çš„OAuthè´¦å·çŠ¶æ€
- å®æ—¶ç»Ÿè®¡æ•°æ®æ˜¾ç¤º

#### 6. Billing & SubscriptionçœŸå®æ•°æ®

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/billing/page.tsx`

**ä¿®æ”¹å†…å®¹ï¼š**
- ç§»é™¤mockæ•°æ®ï¼Œä»APIè¯»å–çœŸå®æ•°æ®
- æ˜¾ç¤ºçœŸå®çš„è®¢é˜…ç­‰çº§ï¼ˆfree/pro/enterpriseï¼‰
- æ˜¾ç¤ºçœŸå®çš„ç§¯åˆ†ä½™é¢
- æ˜¾ç¤ºçœŸå®çš„é…é¢é™åˆ¶å’Œå‰©ä½™æ¬¡æ•°
- ä½¿ç”¨ç»Ÿè®¡é¢æ¿
- æ”¯ä»˜åŠŸèƒ½"å³å°†ä¸Šçº¿"æç¤º

#### 7. è®¾ç½®ç•Œé¢ä¼˜åŒ–

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/dashboard/settings-form.tsx`

**ä¿®æ”¹å†…å®¹ï¼š**
- **ç§»é™¤Profileæ¿å—**ï¼ˆå·²æœ‰ç‹¬ç«‹Profileé¡µé¢ï¼‰
- **å¤–è§‚è®¾ç½®**ï¼š
  - æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
  - å¼ºè°ƒè‰²é€‰æ‹©ï¼ˆ6ç§é¢œè‰²ï¼‰
  - è¯­è¨€åˆ‡æ¢
- **ä¼˜åŒ–åå¥½**ï¼š
  - é»˜è®¤ä¼˜åŒ–æ¨¡å¼ï¼ˆquick/deepï¼‰
  - è‡ªåŠ¨ä¿å­˜å¼€å…³åŠé—´éš”è®¾ç½®
- **å†å²è®°å½•è®¾ç½®**ï¼š
  - å†å²è®°å½•ä¿ç•™å¤©æ•°
  - æœ€å¤§å†å²è®°å½•æ•°
- **é€šçŸ¥è®¾ç½®**ï¼š
  - é‚®ä»¶é€šçŸ¥æ€»å¼€å…³
  - ä¼˜åŒ–å®Œæˆé€šçŸ¥
  - æ¯å‘¨æ‘˜è¦
  - å›¢é˜Ÿæ›´æ–°
- **å¿«æ·é”®æ˜¾ç¤º**
- **æ•°æ®æŒä¹…åŒ–**ï¼šä¿å­˜åˆ°localStorage

#### 8. ä¾§è¾¹æ æ›´æ–°

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/layout/sidebar.tsx`

**æ–°å¢èœå•é¡¹ï¼š**
- "æ¨¡å‹é…ç½®" â†’ `/dashboard/models`
- "å›¢é˜ŸèŠå¤©" â†’ `/dashboard/team/chat`

**æ–‡ä»¶ä¿®æ”¹æ¸…å•ï¼š**

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| `lib/contexts/model-config-context.tsx` | æ–°å¢ | å…¨å±€æ¨¡å‹é…ç½®Context |
| `app/dashboard/models/page.tsx` | æ–°å¢ | AIæ¨¡å‹é…ç½®é¡µé¢ |
| `app/dashboard/team/chat/page.tsx` | æ–°å¢ | å›¢é˜ŸèŠå¤©é¡µé¢ |
| `supabase/migrations/004_team_chat.sql` | æ–°å¢ | å›¢é˜ŸèŠå¤©æ•°æ®åº“è¡¨ |
| `supabase/migrations/005_templates.sql` | æ–°å¢ | æ¨¡æ¿ç³»ç»Ÿæ•°æ®åº“è¡¨ |
| `lib/services/template.ts` | æ–°å¢ | æ¨¡æ¿æœåŠ¡å±‚ |
| `app/api/templates/route.ts` | æ–°å¢ | æ¨¡æ¿åˆ—è¡¨/åˆ›å»º API |
| `app/api/templates/[id]/route.ts` | æ–°å¢ | æ¨¡æ¿è¯¦æƒ…/æ›´æ–°/åˆ é™¤ API |
| `app/api/templates/[id]/use/route.ts` | æ–°å¢ | æ¨¡æ¿ä½¿ç”¨è®¡æ•° API |
| `app/api/templates/[id]/favorite/route.ts` | æ–°å¢ | æ¨¡æ¿æ”¶è— API |
| `components/ui/model-selector.tsx` | ä¿®æ”¹ | ä½¿ç”¨Contextã€åˆ†ç»„æ˜¾ç¤º |
| `components/layout/sidebar.tsx` | ä¿®æ”¹ | æ·»åŠ æ–°èœå•é¡¹ |
| `components/dashboard/history-list.tsx` | ä¿®æ”¹ | æ·»åŠ äºŒæ¬¡ä¼˜åŒ–å’Œè¯¦æƒ…é¢æ¿ |
| `components/dashboard/templates-grid.tsx` | ä¿®æ”¹ | æ·»åŠ CRUDåŠŸèƒ½ |
| `components/dashboard/settings-form.tsx` | ä¿®æ”¹ | ç§»é™¤Profileã€æ·»åŠ ä¸ªæ€§åŒ–è®¾ç½® |
| `app/dashboard/profile/page.tsx` | ä¿®æ”¹ | åŒæ­¥OAuthä¿¡æ¯ã€çœŸå®æ•°æ® |
| `app/dashboard/billing/page.tsx` | ä¿®æ”¹ | å¯¹æ¥çœŸå®æ•°æ®åº“æ•°æ® |
| `app/dashboard/layout.tsx` | ä¿®æ”¹ | æ·»åŠ ModelConfigProvider |
| `app/dashboard/page.tsx` | ä¿®æ”¹ | æ”¯æŒä»sessionStorageè¯»å–é‡ä¼˜åŒ–å†…å®¹ |

---

### 2025-12-04 - V7.0 å…¨é¢ä¼˜åŒ–ä¸åç«¯å®Œå–„

**å®Œæˆçš„å·¥ä½œï¼š**

#### 1. ç™»å½•çŠ¶æ€ä¿æŒ14å¤©

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- `supabase/config.toml` - è®¾ç½® `jwt_expiry = 1209600`ï¼ˆ14å¤©ç§’æ•°ï¼‰
- `lib/supabase/client.ts` - æ·»åŠ  `persistSession: true` å’Œ `autoRefreshToken: true`

**åŠŸèƒ½è¯´æ˜ï¼š**
- JWT Tokenæœ‰æ•ˆæœŸä»é»˜è®¤å€¼å»¶é•¿åˆ°14å¤©
- å®¢æˆ·ç«¯è‡ªåŠ¨åˆ·æ–°Tokenï¼Œä¿æŒç™»å½•çŠ¶æ€
- ä½¿ç”¨CookieæŒä¹…åŒ–å­˜å‚¨Session

#### 2. æ¨¡å‹é…ç½®é¡µé¢é‡æ„ï¼ˆåˆå¹¶API Keysï¼‰

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/models/page.tsx`

**æ–°è®¾è®¡ç‰¹æ€§ï¼š**
- **åŒé¢æ¿å¸ƒå±€**ï¼šå·¦ä¾§æœåŠ¡å•†é€‰æ‹©ï¼Œå³ä¾§è¯¦ç»†é…ç½®
- **æœåŠ¡å•†çŠ¶æ€æŒ‡ç¤º**ï¼šæ˜¾ç¤ºå·²é…ç½®/æœªé…ç½®/é»˜è®¤æ ‡ç­¾
- **API Keyé›†æˆç®¡ç†**ï¼š
  - åœ¨æ¨¡å‹é¡µé¢ç›´æ¥æ·»åŠ /åˆ é™¤/éªŒè¯API Key
  - è®¾ç½®é»˜è®¤Provider
  - æŸ¥çœ‹Keyé…ç½®çŠ¶æ€
- **åŠ¨æ€æ¨¡å‹è·å–**ï¼šä»å„Providerå®æ—¶è·å–æ¨¡å‹åˆ—è¡¨
- **æ¨¡å‹è¯¦æƒ…å±•ç¤º**ï¼šä¸Šä¸‹æ–‡é•¿åº¦ã€æ¨èæ ‡ç­¾ã€èƒ½åŠ›å¾½ç« 
- **å¾®è°ƒå‚æ•°æ»‘å—**ï¼šTemperatureã€Max Tokensã€Top Pã€Frequency/Presence Penalty
- **Promto AIå ä½**ï¼šæ˜¾ç¤º"å³å°†æ¨å‡º"æç¤º

**ç›¸å…³æœåŠ¡æ›´æ–°ï¼š**
- `lib/services/models.ts` - æ–°å¢ `getAllModels()` èšåˆæ–¹æ³•
- `lib/contexts/model-config-context.tsx` - è°ƒç”¨æ–°çš„ `/api/models` ç«¯ç‚¹
- `app/api/models/route.ts` - æ–°APIç«¯ç‚¹è¿”å›æ‰€æœ‰Providerçš„æ¨¡å‹

#### 3. è®¾ç½®ç•Œé¢å¤šçª—å£é‡è®¾è®¡

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/settings/page.tsx`

**æ–°è®¾è®¡ç»“æ„ï¼š**
```
è®¾ç½®ç•Œé¢
â”œâ”€â”€ é€šç”¨è®¾ç½® (General)
â”‚   â”œâ”€â”€ è¯­è¨€é€‰æ‹©
â”‚   â”œâ”€â”€ æ—¶åŒºè®¾ç½®
â”‚   â””â”€â”€ è‡ªåŠ¨ä¿å­˜
â”œâ”€â”€ å¤–è§‚è®¾ç½® (Appearance)
â”‚   â”œâ”€â”€ ä¸»é¢˜åˆ‡æ¢ï¼ˆæµ…è‰²/æ·±è‰²/ç³»ç»Ÿï¼‰
â”‚   â”œâ”€â”€ å¼ºè°ƒè‰²é€‰æ‹©ï¼ˆ6ç§é¢œè‰²ï¼‰
â”‚   â””â”€â”€ å­—ä½“å¤§å°
â”œâ”€â”€ é€šçŸ¥è®¾ç½® (Notifications)
â”‚   â”œâ”€â”€ é‚®ä»¶é€šçŸ¥
â”‚   â”œâ”€â”€ æ¨é€é€šçŸ¥
â”‚   â””â”€â”€ å›¢é˜Ÿæ›´æ–°
â”œâ”€â”€ å¿«æ·é”® (Shortcuts)
â”‚   â””â”€â”€ é”®ç›˜å¿«æ·é”®åˆ—è¡¨
â””â”€â”€ å±é™©æ“ä½œ (Danger Zone)
    â”œâ”€â”€ æ¸…é™¤æ‰€æœ‰æ•°æ®
    â””â”€â”€ åˆ é™¤è´¦å·
```

**ç»„ä»¶æ‹†åˆ†ï¼š**
- `components/dashboard/settings/general-settings-tab.tsx`
- `components/dashboard/settings/appearance-settings-tab.tsx`
- `components/dashboard/settings/notifications-settings-tab.tsx`
- `components/dashboard/settings/shortcuts-settings-tab.tsx`
- `components/dashboard/settings/danger-zone-settings-tab.tsx`

#### 4. ä¸ªäººèµ„æ–™ç•Œé¢å¤šçª—å£è®¾è®¡

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/profile/page.tsx`

**æ–°è®¾è®¡ç»“æ„ï¼š**
```
ä¸ªäººèµ„æ–™
â”œâ”€â”€ ä¸ªäººä¿¡æ¯ (Personal Info)
â”‚   â”œâ”€â”€ å¤´åƒä¸Šä¼ 
â”‚   â”œâ”€â”€ æ˜¾ç¤ºåç§°
â”‚   â”œâ”€â”€ é‚®ç®±ï¼ˆåªè¯»ï¼‰
â”‚   â””â”€â”€ ä¸ªäººç®€ä»‹
â”œâ”€â”€ å…³è”è´¦å· (Connected Accounts)
â”‚   â”œâ”€â”€ Googleè´¦å·è¿æ¥/æ–­å¼€
â”‚   â”œâ”€â”€ GitHubè´¦å·è¿æ¥/æ–­å¼€
â”‚   â””â”€â”€ åŒæ­¥OAuthä¿¡æ¯æŒ‰é’®
â”œâ”€â”€ ä½¿ç”¨ç»Ÿè®¡ (Usage Stats)
â”‚   â”œâ”€â”€ æ€»ä¼˜åŒ–æ¬¡æ•°
â”‚   â”œâ”€â”€ æœ¬æœˆä½¿ç”¨é‡
â”‚   â”œâ”€â”€ å¸¸ç”¨æ¨¡å‹
â”‚   â””â”€â”€ é…é¢ä½¿ç”¨è¿›åº¦
â””â”€â”€ æ´»åŠ¨æ—¥å¿— (Activity Log)
    â””â”€â”€ æœ€è¿‘æ“ä½œè®°å½•
```

**Connected AccountsåŠŸèƒ½ï¼š**
- æ˜¾ç¤ºå·²è¿æ¥çš„OAuthæä¾›å•†
- Connect/DisconnectæŒ‰é’®åˆ‡æ¢
- æ˜¾ç¤ºå…³è”çš„é‚®ç®±/ç”¨æˆ·å
- "ä»OAuthåŒæ­¥"åŠŸèƒ½æ›´æ–°æœ¬åœ°èµ„æ–™

#### 5. é€šçŸ¥ç•Œé¢å…¨é¢ä¼˜åŒ–

**ä¿®æ”¹æ–‡ä»¶ï¼š** `app/dashboard/notifications/page.tsx`

**æ–°åŠŸèƒ½ï¼š**
- **åŠ¨æ€Header**ï¼šæ˜¾ç¤ºæœªè¯»æ•°é‡ã€ä¸€é”®å…¨éƒ¨å·²è¯»
- **é€šçŸ¥åˆ†ç±»**ï¼šå›¢é˜Ÿé‚€è¯·ã€Promptåˆ†äº«ã€ç³»ç»Ÿæ¶ˆæ¯ã€AIå“åº”ç­‰
- **æ‰¹é‡æ“ä½œ**ï¼šå…¨é€‰/å–æ¶ˆã€æ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ ‡è®°å·²è¯»
- **é€šçŸ¥è®¾ç½®é¢æ¿**ï¼š
  - é‚®ä»¶é€šçŸ¥å¼€å…³
  - æ¨é€é€šçŸ¥å¼€å…³
  - æ¯å‘¨æ‘˜è¦
  - å›¢é˜Ÿæ›´æ–°
  - äº§å“æ–°é—»
  - è¥é”€ä¿¡æ¯
  - å…æ‰“æ‰°æ¨¡å¼
- **ç©ºçŠ¶æ€è®¾è®¡**ï¼šæ— é€šçŸ¥æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- **åŠ¨ç”»æ•ˆæœ**ï¼šä½¿ç”¨Framer Motionå®ç°æµç•…è¿‡æ¸¡

#### 6. å†å²è®°å½•æ—¶é—´çº¿è§†å›¾

**ä¿®æ”¹æ–‡ä»¶ï¼š** `components/dashboard/history-list.tsx`

**æ–°åŠŸèƒ½ï¼š**
- **æ—¶é—´çº¿å¸ƒå±€**ï¼šæŒ‰æ—¥æœŸåˆ†ç»„æ˜¾ç¤ºå†å²è®°å½•
- **æœç´¢ä¸ç­›é€‰**ï¼šæœç´¢å…³é”®è¯ã€æŒ‰ç±»å‹ç­›é€‰ï¼ˆå†™ä½œ/ä»£ç /å›¾åƒ/è¥é”€ï¼‰
- **æ‰¹é‡æ“ä½œ**ï¼š
  - å…¨é€‰/å–æ¶ˆé€‰æ‹©
  - æ‰¹é‡åˆ é™¤
  - æ‰¹é‡å¯¼å‡ºï¼ˆJSONæ ¼å¼ï¼‰
- **å±•å¼€è¯¦æƒ…é¢æ¿**ï¼š
  - æ˜¾ç¤ºåŸå§‹Promptå’Œä¼˜åŒ–ç»“æœ
  - å¯¹æ¯”è§†å›¾ï¼ˆå·¦å³å¯¹ç…§ï¼‰
  - å¤åˆ¶æŒ‰é’®
- **æ“ä½œæŒ‰é’®**ï¼š
  - å†æ¬¡ä¼˜åŒ–ï¼ˆè·³è½¬åˆ°ä¸»é¡µå¡«å……åŸå§‹å†…å®¹ï¼‰
  - åŸºäºæ­¤ç»§ç»­ä¼˜åŒ–ï¼ˆä»¥ç»“æœä¸ºèµ·ç‚¹ï¼‰
  - æŸ¥çœ‹å¯¹æ¯”ï¼ˆåˆ‡æ¢å¯¹æ¯”è§†å›¾ï¼‰
- **æ”¶è—åŠŸèƒ½**ï¼šæ˜Ÿæ ‡æ ‡è®°é‡è¦è®°å½•

#### 7. Team Spaceåç«¯APIå®Œå–„

**æ–°å¢æ–‡ä»¶ï¼š**
- `lib/services/team.ts` - TeamæœåŠ¡å±‚
- `app/api/teams/route.ts` - å›¢é˜Ÿåˆ—è¡¨/åˆ›å»º
- `app/api/teams/[id]/route.ts` - å›¢é˜Ÿè¯¦æƒ…/æ›´æ–°/åˆ é™¤
- `app/api/teams/[id]/members/route.ts` - æˆå‘˜ç®¡ç†
- `app/api/teams/[id]/messages/route.ts` - æ¶ˆæ¯æ”¶å‘

**TeamServiceåŠŸèƒ½ï¼š**
```typescript
// å›¢é˜ŸCRUD
createTeam(ownerId, name, description?, avatarUrl?)
getTeamsByUserId(userId)
getTeamById(teamId)
updateTeam(teamId, updates)
deleteTeam(teamId)

// æˆå‘˜ç®¡ç†
inviteMember(teamId, inviterId, email, role)
acceptInvite(teamMemberId)
removeMember(teamId, userId)
updateMemberRole(teamId, userId, newRole)
getTeamMembers(teamId)

// æ¶ˆæ¯ç®¡ç†
sendMessage(teamId, userId, content, messageType, metadata?)
getMessages(teamId, limit?, offset?)
updateMessage(messageId, content)
deleteMessage(messageId)
```

**APIç«¯ç‚¹ï¼š**

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/teams` | GET | è·å–ç”¨æˆ·æ‰€å±å›¢é˜Ÿåˆ—è¡¨ |
| `/api/teams` | POST | åˆ›å»ºæ–°å›¢é˜Ÿ |
| `/api/teams/[id]` | GET | è·å–å›¢é˜Ÿè¯¦æƒ… |
| `/api/teams/[id]` | PUT | æ›´æ–°å›¢é˜Ÿä¿¡æ¯ |
| `/api/teams/[id]` | DELETE | åˆ é™¤å›¢é˜Ÿ |
| `/api/teams/[id]/members` | GET | è·å–æˆå‘˜åˆ—è¡¨ |
| `/api/teams/[id]/members` | POST | é‚€è¯·æ–°æˆå‘˜ |
| `/api/teams/[id]/members` | PUT | æ›´æ–°æˆå‘˜è§’è‰² |
| `/api/teams/[id]/members/[memberId]` | DELETE | ç§»é™¤æˆå‘˜ |
| `/api/teams/[id]/messages` | GET | è·å–èŠå¤©æ¶ˆæ¯ |
| `/api/teams/[id]/messages` | POST | å‘é€æ¶ˆæ¯ |

#### 8. Team Space/Chatå‰ç«¯çœŸå®æ•°æ®

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- `app/dashboard/team/page.tsx` - å›¢é˜Ÿç©ºé—´ä¸»é¡µ
- `app/dashboard/team/chat/page.tsx` - å›¢é˜ŸèŠå¤©é¡µé¢

**Team Spaceé¡µé¢æ›´æ–°ï¼š**
- è°ƒç”¨ `TeamService.getTeamById()` è·å–å›¢é˜Ÿä¿¡æ¯
- è°ƒç”¨ `TeamService.getTeamMembers()` è·å–æˆå‘˜åˆ—è¡¨
- é‚€è¯·æˆå‘˜æ¨¡æ€æ¡†è°ƒç”¨ `TeamService.inviteMember()` API
- ç§»é™¤æ‰€æœ‰mockæ•°æ®
- æ·»åŠ åŠ è½½çŠ¶æ€å’Œç©ºçŠ¶æ€å¤„ç†

**Team Chaté¡µé¢æ›´æ–°ï¼š**
- ä½¿ç”¨Supabase Realtimeè®¢é˜… `team_messages` è¡¨
- å®æ—¶æ¥æ”¶æ–°æ¶ˆæ¯å¹¶æ›´æ–°UI
- è°ƒç”¨ `TeamService.sendMessage()` å‘é€æ¶ˆæ¯
- ä» `profiles` è¡¨è·å–å‘é€è€…å¤´åƒå’Œåç§°
- æ”¯æŒæ¶ˆæ¯ç±»å‹ï¼štextã€prompt_shareã€ai_responseã€system
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯

**Realtimeè®¢é˜…ç¤ºä¾‹ï¼š**
```typescript
const subscription = supabase
  .channel(`team_chat_${selectedChat.id}`)
  .on(
    "postgres_changes",
    {
      event: "INSERT",
      schema: "public",
      table: "team_messages",
      filter: `team_id=eq.${selectedChat.id}`,
    },
    (payload) => {
      // å¤„ç†æ–°æ¶ˆæ¯
    }
  )
  .subscribe()
```

#### æ–‡ä»¶ä¿®æ”¹æ¸…å•

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| `supabase/config.toml` | ä¿®æ”¹ | JWTè¿‡æœŸæ—¶é—´è®¾ä¸º14å¤© |
| `lib/supabase/client.ts` | ä¿®æ”¹ | æ·»åŠ SessionæŒä¹…åŒ–é…ç½® |
| `app/dashboard/models/page.tsx` | é‡æ„ | åˆå¹¶API Keysï¼ŒåŒé¢æ¿å¸ƒå±€ |
| `lib/services/models.ts` | ä¿®æ”¹ | æ·»åŠ getAllModelsèšåˆæ–¹æ³• |
| `lib/contexts/model-config-context.tsx` | ä¿®æ”¹ | ä½¿ç”¨æ–°APIç«¯ç‚¹ |
| `app/dashboard/settings/page.tsx` | é‡æ„ | å¤šçª—å£æ ‡ç­¾é¡µå¸ƒå±€ |
| `components/dashboard/settings/*.tsx` | æ–°å¢ | è®¾ç½®å­é¡µé¢ç»„ä»¶ |
| `app/dashboard/profile/page.tsx` | é‡æ„ | å¤šçª—å£+Connected Accounts |
| `components/dashboard/profile/*.tsx` | æ–°å¢ | èµ„æ–™å­é¡µé¢ç»„ä»¶ |
| `app/dashboard/notifications/page.tsx` | é‡æ„ | å…¨é¢ä¼˜åŒ–ï¼Œæ·»åŠ è®¾ç½®é¢æ¿ |
| `components/dashboard/history-list.tsx` | é‡æ„ | æ—¶é—´çº¿è§†å›¾ï¼Œæ‰¹é‡æ“ä½œ |
| `lib/services/team.ts` | æ–°å¢ | TeamæœåŠ¡å±‚ |
| `app/api/teams/route.ts` | æ–°å¢ | å›¢é˜ŸAPI |
| `app/api/teams/[id]/route.ts` | æ–°å¢ | å›¢é˜Ÿè¯¦æƒ…API |
| `app/api/teams/[id]/members/route.ts` | æ–°å¢ | æˆå‘˜ç®¡ç†API |
| `app/api/teams/[id]/messages/route.ts` | æ–°å¢ | æ¶ˆæ¯API |
| `app/dashboard/team/page.tsx` | ä¿®æ”¹ | ä½¿ç”¨çœŸå®APIæ•°æ® |
| `app/dashboard/team/chat/page.tsx` | ä¿®æ”¹ | Realtimeè®¢é˜…+çœŸå®æ•°æ® |

---

*æ–‡æ¡£æœ€åæ›´æ–°ï¼š2025-12-04*

